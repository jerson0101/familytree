{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useFamilyTree.ts"],"sourcesContent":["'use client';\nimport { useState } from 'react';\n\nexport type RelationshipTypeOption = 'parent' | 'child' | 'spouse' | 'sibling';\n\nexport interface MedicalCondition {\n    id: string;\n    name: string;\n    notes?: string;\n}\n\nexport interface Person {\n    id: string;\n    firstName: string;\n    lastName: string;\n    gender?: string;\n    birthDate?: string;\n    deathDate?: string;\n    avatarUrl?: string;\n    medicalConditions?: MedicalCondition[];\n}\n\nexport interface Union {\n    id: string;\n    partner1Id: string;\n    partner2Id: string;\n}\n\nexport function useFamilyTree() {\n    const [persons, setPersons] = useState<Person[]>([]);\n    const [unions, setUnions] = useState<Union[]>([]);\n    const [graphData, setGraphData] = useState<any>({ nodes: [], edges: [], persons: [], unions: [] });\n    const [isLoading, setIsLoading] = useState(false);\n\n    const createPersonWithRelationship = async (\n        personOptions: Partial<Person>,\n        relatedPersonId: string,\n        relationshipType: RelationshipTypeOption\n    ) => {\n        return { success: true };\n    };\n\n    const getRootPerson = () => {\n        return persons.length > 0 ? persons[0] : null;\n    };\n\n    const getPersonRole = (personId: string) => {\n        return 'relative';\n    };\n\n    const updatePerson = async (personId: string, updates: Partial<Person>) => {\n        return { success: true };\n    };\n\n    const deletePerson = async (personId: string) => {\n        return { success: true };\n    };\n\n    const getParentsOfPerson = (personId: string): Person[] => {\n        return [];\n    };\n\n    return {\n        persons,\n        unions,\n        graphData,\n        isLoading,\n        createPersonWithRelationship,\n        getRootPerson,\n        getPersonRole,\n        updatePerson,\n        deletePerson,\n        getParentsOfPerson\n    };\n}\n"],"names":[],"mappings":";;;;AACA;;AADA;;AA4BO,SAAS;;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAM;QAAE,OAAO,EAAE;QAAE,OAAO,EAAE;QAAE,SAAS,EAAE;QAAE,QAAQ,EAAE;IAAC;IAChG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,+BAA+B,OACjC,eACA,iBACA;QAEA,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,gBAAgB;QAClB,OAAO,QAAQ,MAAM,GAAG,IAAI,OAAO,CAAC,EAAE,GAAG;IAC7C;IAEA,MAAM,gBAAgB,CAAC;QACnB,OAAO;IACX;IAEA,MAAM,eAAe,OAAO,UAAkB;QAC1C,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,eAAe,OAAO;QACxB,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,qBAAqB,CAAC;QACxB,OAAO,EAAE;IACb;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA9CgB"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useFamily.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, useState, useMemo } from 'react';\nimport { useFamilyStore, type Family, type FamilyMember } from '@/stores/familyStore';\nimport { useAuthStore } from '@/stores/authStore';\nimport { createClient } from '@/lib/supabase';\nimport type { FamilyRole } from '@kintree/shared';\n\nexport interface CreateFamilyInput {\n  name: string;\n  description?: string;\n  primaryColor?: string;\n}\n\nexport function useFamily() {\n  const user = useAuthStore((state) => state.user);\n  const supabase = useMemo(() => createClient(), []);\n  const {\n    currentFamily,\n    families,\n    members,\n    currentUserRole,\n    isLoading,\n    setCurrentFamily,\n    setFamilies,\n    setMembers,\n    setCurrentUserRole,\n    setLoading,\n    reset,\n  } = useFamilyStore();\n\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch user's families on mount\n  useEffect(() => {\n    if (user?.id) {\n      fetchFamilies();\n    } else {\n      reset();\n    }\n  }, [user?.id]);\n\n  // Fetch family members when current family changes\n  useEffect(() => {\n    if (currentFamily?.id && user?.id) {\n      fetchMembers(currentFamily.id);\n      fetchUserRole(currentFamily.id);\n    }\n  }, [currentFamily?.id, user?.id]);\n\n  const fetchFamilies = useCallback(async () => {\n    if (!user?.id) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Get families where user is a member\n      const { data: memberData, error: memberError } = await supabase\n        .from('family_members')\n        .select(`\n          family_id,\n          role,\n          families (\n            id,\n            name,\n            description,\n            primary_color,\n            created_at\n          )\n        `)\n        .eq('user_id', user.id)\n        .eq('is_active', true);\n\n      if (memberError) throw memberError;\n\n      const familyList: Family[] = (memberData || [])\n        .filter((m: any) => m.families)\n        .map((m: any) => ({\n          id: (m.families as any).id,\n          name: (m.families as any).name,\n          description: (m.families as any).description,\n          primaryColor: (m.families as any).primary_color || '#0ea5e9',\n          createdAt: (m.families as any).created_at,\n          memberCount: 0, // Will be updated later\n        }));\n\n      setFamilies(familyList);\n\n      // Auto-select first family if none selected\n      if (familyList.length > 0 && !currentFamily) {\n        setCurrentFamily(familyList[0]);\n      }\n    } catch (err) {\n      console.error('Error fetching families:', err);\n      setError('Error loading families');\n    } finally {\n      setLoading(false);\n    }\n  }, [user?.id, currentFamily, setFamilies, setCurrentFamily, setLoading]);\n\n  const fetchMembers = useCallback(async (familyId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('family_members')\n        .select(`\n          id,\n          user_id,\n          person_id,\n          role,\n          accepted_at,\n          is_active\n        `)\n        .eq('family_id', familyId)\n        .eq('is_active', true);\n\n      if (error) throw error;\n\n      // Fetch user profiles separately to avoid join issues\n      const userIds = (data || []).map((m: any) => m.user_id);\n      let profilesMap: Record<string, any> = {};\n\n      if (userIds.length > 0) {\n        const { data: profiles } = await supabase\n          .from('user_profiles')\n          .select('id, email, first_name, last_name, avatar_url')\n          .in('id', userIds);\n\n        if (profiles) {\n          profilesMap = profiles.reduce((acc: any, p: any) => {\n            acc[p.id] = p;\n            return acc;\n          }, {});\n        }\n      }\n\n      const memberList: FamilyMember[] = (data || []).map((m: any) => {\n        const profile = profilesMap[m.user_id] || {};\n        return {\n          id: m.id,\n          userId: m.user_id,\n          personId: m.person_id || undefined,\n          role: m.role as FamilyRole,\n          email: profile.email || '',\n          displayName: `${profile.first_name || ''} ${profile.last_name || ''}`.trim() || 'User',\n          avatarUrl: profile.avatar_url,\n          joinedAt: m.accepted_at || '',\n          isActive: m.is_active,\n        };\n      });\n\n      setMembers(memberList);\n\n      // Update member count in current family\n      if (currentFamily) {\n        setCurrentFamily({ ...currentFamily, memberCount: memberList.length });\n      }\n    } catch (err) {\n      console.error('Error fetching members:', err);\n      setMembers([]);\n    }\n  }, [currentFamily, setMembers, setCurrentFamily]);\n\n  const fetchUserRole = useCallback(async (familyId: string) => {\n    if (!user?.id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('family_members')\n        .select('role')\n        .eq('family_id', familyId)\n        .eq('user_id', user.id)\n        .eq('is_active', true)\n        .maybeSingle();\n\n      if (error) throw error;\n\n      // data will be null if no record found, which is valid\n      setCurrentUserRole(data?.role as FamilyRole || null);\n    } catch (err) {\n      console.error('Error fetching user role:', err);\n      setCurrentUserRole(null);\n    }\n  }, [user?.id, setCurrentUserRole]);\n\n  const createFamily = useCallback(async (input: CreateFamilyInput): Promise<Family | null> => {\n    if (!user?.id) return null;\n\n    setError(null);\n\n    try {\n      const { data, error } = await supabase\n        .from('families')\n        .insert({\n          name: input.name,\n          description: input.description,\n          primary_color: input.primaryColor || '#0ea5e9',\n          created_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      const newFamily: Family = {\n        id: data.id,\n        name: data.name,\n        description: data.description,\n        primaryColor: data.primary_color,\n        createdAt: data.created_at,\n        memberCount: 1,\n      };\n\n      // Refresh families list\n      await fetchFamilies();\n\n      // Set as current family\n      setCurrentFamily(newFamily);\n\n      return newFamily;\n    } catch (err) {\n      console.error('Error creating family:', err);\n      setError('Error creating family');\n      return null;\n    }\n  }, [user?.id, fetchFamilies, setCurrentFamily]);\n\n  const inviteMember = useCallback(async (email: string, role: FamilyRole = 'viewer'): Promise<boolean> => {\n    if (!currentFamily?.id || !user?.id) return false;\n\n    setError(null);\n\n    try {\n      // First, find the user by email\n      const { data: userData, error: userError } = await supabase\n        .from('user_profiles')\n        .select('id')\n        .eq('email', email)\n        .single();\n\n      if (userError || !userData) {\n        setError('User not found with that email');\n        return false;\n      }\n\n      // Add them as a family member\n      const { error: memberError } = await supabase\n        .from('family_members')\n        .insert({\n          family_id: currentFamily.id,\n          user_id: userData.id,\n          role,\n          invited_by: user.id,\n        });\n\n      if (memberError) {\n        if (memberError.code === '23505') {\n          setError('User is already a member of this family');\n        } else {\n          throw memberError;\n        }\n        return false;\n      }\n\n      // Refresh members\n      await fetchMembers(currentFamily.id);\n\n      return true;\n    } catch (err) {\n      console.error('Error inviting member:', err);\n      setError('Error inviting member');\n      return false;\n    }\n  }, [currentFamily?.id, user?.id, fetchMembers]);\n\n  const updateMemberRole = useCallback(async (memberId: string, newRole: FamilyRole): Promise<boolean> => {\n    if (!currentFamily?.id) return false;\n\n    try {\n      const { error } = await supabase\n        .from('family_members')\n        .update({ role: newRole })\n        .eq('id', memberId);\n\n      if (error) throw error;\n\n      await fetchMembers(currentFamily.id);\n      return true;\n    } catch (err) {\n      console.error('Error updating member role:', err);\n      return false;\n    }\n  }, [currentFamily?.id, fetchMembers]);\n\n  const removeMember = useCallback(async (memberId: string): Promise<boolean> => {\n    if (!currentFamily?.id) return false;\n\n    try {\n      const { error } = await supabase\n        .from('family_members')\n        .update({ is_active: false })\n        .eq('id', memberId);\n\n      if (error) throw error;\n\n      await fetchMembers(currentFamily.id);\n      return true;\n    } catch (err) {\n      console.error('Error removing member:', err);\n      return false;\n    }\n  }, [currentFamily?.id, fetchMembers]);\n\n  const switchFamily = useCallback((familyId: string) => {\n    const family = families.find((f) => f.id === familyId);\n    if (family) {\n      setCurrentFamily(family);\n    }\n  }, [families, setCurrentFamily]);\n\n  const canEdit = currentUserRole === 'admin' || currentUserRole === 'editor';\n  const isAdmin = currentUserRole === 'admin';\n\n  return {\n    currentFamily,\n    families,\n    members,\n    currentUserRole,\n    isLoading,\n    error,\n    canEdit,\n    isAdmin,\n    fetchFamilies,\n    createFamily,\n    inviteMember,\n    updateMemberRole,\n    removeMember,\n    switchFamily,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useLocationTracking.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { createClient } from '@/lib/supabase';\nimport { useFamily } from './useFamily';\n\nexport interface LocationData {\n  latitude: number;\n  longitude: number;\n  accuracy?: number;\n  altitude?: number;\n  heading?: number;\n  speed?: number;\n  address?: string;\n  city?: string;\n  country?: string;\n}\n\nexport interface FamilyMemberLocation {\n  userId: string;\n  personId: string;\n  firstName: string;\n  lastName: string;\n  photoUrl: string | null;\n  latitude: number;\n  longitude: number;\n  accuracy: number | null;\n  address: string | null;\n  city: string | null;\n  batteryLevel: number | null;\n  isCharging: boolean;\n  lastUpdatedAt: string;\n  isOnline: boolean;\n}\n\nexport interface LocationSharingSettings {\n  shareLocation: boolean;\n  shareWithAll: boolean;\n  sharePreciseLocation: boolean;\n  updateFrequency: 'realtime' | 'hourly' | 'daily' | 'manual';\n}\n\ntype PermissionStatus = 'prompt' | 'granted' | 'denied' | 'unavailable';\n\nexport function useLocationTracking() {\n  const supabase = useMemo(() => createClient(), []);\n  const { currentFamily } = useFamily();\n\n  const [permissionStatus, setPermissionStatus] = useState<PermissionStatus>('prompt');\n  const [isTracking, setIsTracking] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState<LocationData | null>(null);\n  const [familyLocations, setFamilyLocations] = useState<FamilyMemberLocation[]>([]);\n  const [settings, setSettings] = useState<LocationSharingSettings>({\n    shareLocation: false,\n    shareWithAll: true,\n    sharePreciseLocation: true,\n    updateFrequency: 'realtime',\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Check if geolocation is available\n  const isGeolocationAvailable = typeof navigator !== 'undefined' && 'geolocation' in navigator;\n\n  // Check permission status\n  const checkPermission = useCallback(async () => {\n    if (!isGeolocationAvailable) {\n      setPermissionStatus('unavailable');\n      return 'unavailable';\n    }\n\n    try {\n      const result = await navigator.permissions.query({ name: 'geolocation' });\n      setPermissionStatus(result.state as PermissionStatus);\n\n      result.onchange = () => {\n        setPermissionStatus(result.state as PermissionStatus);\n      };\n\n      return result.state as PermissionStatus;\n    } catch {\n      // Some browsers don't support permissions API\n      setPermissionStatus('prompt');\n      return 'prompt';\n    }\n  }, [isGeolocationAvailable]);\n\n  // Request location permission\n  const requestPermission = useCallback(async (): Promise<boolean> => {\n    if (!isGeolocationAvailable) {\n      setError('Geolocation not available on this device');\n      return false;\n    }\n\n    return new Promise((resolve) => {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setPermissionStatus('granted');\n          setCurrentLocation({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            accuracy: position.coords.accuracy,\n            altitude: position.coords.altitude || undefined,\n            heading: position.coords.heading || undefined,\n            speed: position.coords.speed || undefined,\n          });\n          resolve(true);\n        },\n        (error) => {\n          if (error.code === error.PERMISSION_DENIED) {\n            setPermissionStatus('denied');\n            setError('Location permission denied');\n          } else {\n            setError('Error getting location');\n          }\n          resolve(false);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0,\n        }\n      );\n    });\n  }, [isGeolocationAvailable]);\n\n  // Reverse geocode to get address\n  const reverseGeocode = useCallback(async (lat: number, lng: number): Promise<{ address?: string; city?: string; country?: string }> => {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`,\n        {\n          headers: {\n            'User-Agent': 'KinTree Family App',\n          },\n        }\n      );\n\n      if (!response.ok) return {};\n\n      const data = await response.json();\n      const addr = data.address || {};\n\n      return {\n        address: data.display_name?.split(',').slice(0, 2).join(',') || undefined,\n        city: addr.city || addr.town || addr.village || addr.municipality || undefined,\n        country: addr.country || undefined,\n      };\n    } catch {\n      return {};\n    }\n  }, []);\n\n  // Update location in database\n  const updateLocation = useCallback(async (location: LocationData) => {\n    if (!currentFamily?.id) return;\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      // Get address if not provided\n      let locationWithAddress = { ...location };\n      if (!location.address) {\n        const geoData = await reverseGeocode(location.latitude, location.longitude);\n        locationWithAddress = { ...location, ...geoData };\n      }\n\n      // Get battery info if available\n      let batteryLevel: number | undefined;\n      let isCharging: boolean | undefined;\n\n      if ('getBattery' in navigator) {\n        try {\n          const battery = await (navigator as any).getBattery();\n          batteryLevel = Math.round(battery.level * 100);\n          isCharging = battery.charging;\n        } catch {\n          // Battery API not available\n        }\n      }\n\n      const { error: rpcError } = await supabase.rpc('update_user_location', {\n        p_family_id: currentFamily.id,\n        p_latitude: locationWithAddress.latitude,\n        p_longitude: locationWithAddress.longitude,\n        p_accuracy: locationWithAddress.accuracy || null,\n        p_altitude: locationWithAddress.altitude || null,\n        p_heading: locationWithAddress.heading || null,\n        p_speed: locationWithAddress.speed || null,\n        p_address: locationWithAddress.address || null,\n        p_city: locationWithAddress.city || null,\n        p_country: locationWithAddress.country || null,\n        p_battery_level: batteryLevel || null,\n        p_is_charging: isCharging || null,\n      });\n\n      if (rpcError) {\n        setError('Error updating location');\n        return;\n      }\n\n      setCurrentLocation(locationWithAddress);\n      setError(null);\n    } catch (err) {\n      setError('Error updating location');\n    }\n  }, [currentFamily?.id, supabase, reverseGeocode]);\n\n  // Start tracking location\n  const startTracking = useCallback(() => {\n    if (!isGeolocationAvailable || permissionStatus !== 'granted') return () => { };\n\n    let currentWatchId: number | null = null;\n    let usingHighAccuracy = true;\n\n    const handlePosition = (position: GeolocationPosition) => {\n      const location: LocationData = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        altitude: position.coords.altitude || undefined,\n        heading: position.coords.heading || undefined,\n        speed: position.coords.speed || undefined,\n      };\n\n      updateLocation(location);\n    };\n\n    const handleError = (error: GeolocationPositionError) => {\n      // If high accuracy fails, switch to low accuracy\n      if (usingHighAccuracy && (error.code === error.TIMEOUT || error.code === error.POSITION_UNAVAILABLE)) {\n        usingHighAccuracy = false;\n        if (currentWatchId !== null) navigator.geolocation.clearWatch(currentWatchId);\n\n        currentWatchId = navigator.geolocation.watchPosition(\n          handlePosition,\n          (fallbackError) => {\n            setError(`Error tracking location: ${fallbackError.message}`);\n          },\n          {\n            enableHighAccuracy: false,\n            timeout: 30000,\n            maximumAge: 60000,\n          }\n        );\n        return;\n      }\n\n      setError(`Error tracking location: ${error.message}`);\n    };\n\n    currentWatchId = navigator.geolocation.watchPosition(\n      handlePosition,\n      handleError,\n      {\n        enableHighAccuracy: true,\n        timeout: 10000, // 10s for high accuracy\n        maximumAge: 60000, // Cache for 1 minute\n      }\n    );\n\n    return () => {\n      if (currentWatchId !== null) navigator.geolocation.clearWatch(currentWatchId);\n    };\n  }, [isGeolocationAvailable, permissionStatus, updateLocation]);\n\n  // Fetch family members' locations\n  const fetchFamilyLocations = useCallback(async () => {\n    if (!currentFamily?.id) {\n      setFamilyLocations([]);\n      return;\n    }\n\n    try {\n      const { data, error: rpcError } = await supabase.rpc('get_family_locations', {\n        p_family_id: currentFamily.id,\n      });\n\n      if (rpcError) {\n        setError('Error fetching family locations');\n        setFamilyLocations([]);\n        return;\n      }\n\n      const locations: FamilyMemberLocation[] = (data || []).map((loc: any) => ({\n        userId: loc.user_id,\n        personId: loc.person_id,\n        firstName: loc.first_name,\n        lastName: loc.last_name,\n        photoUrl: loc.photo_url,\n        latitude: parseFloat(loc.latitude),\n        longitude: parseFloat(loc.longitude),\n        accuracy: loc.accuracy ? parseFloat(loc.accuracy) : null,\n        address: loc.address,\n        city: loc.city,\n        batteryLevel: loc.battery_level,\n        isCharging: loc.is_charging || false,\n        lastUpdatedAt: loc.last_updated_at,\n        isOnline: loc.is_online,\n      }));\n\n      setFamilyLocations(locations);\n      setError(null);\n    } catch (err) {\n      setError('Error fetching family locations');\n      setFamilyLocations([]);\n    }\n  }, [currentFamily?.id, supabase]);\n\n  // Load settings\n  const loadSettings = useCallback(async () => {\n    if (!currentFamily?.id) return;\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const { data, error: queryError } = await supabase\n        .from('location_sharing_settings')\n        .select('*')\n        .eq('user_id', user.id)\n        .eq('family_id', currentFamily.id)\n        .maybeSingle();\n\n      if (queryError) {\n        setError('Error loading location settings');\n        return;\n      }\n\n      if (data) {\n        setSettings({\n          shareLocation: data.share_location,\n          shareWithAll: data.share_with_all,\n          sharePreciseLocation: data.share_precise_location,\n          updateFrequency: data.update_frequency,\n        });\n      }\n    } catch (err) {\n      setError('Error loading location settings');\n    }\n  }, [currentFamily?.id, supabase]);\n\n  // Save settings\n  const saveSettings = useCallback(async (newSettings: Partial<LocationSharingSettings>) => {\n    if (!currentFamily?.id) return;\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n\n      const updatedSettings = { ...settings, ...newSettings };\n\n      const { error: upsertError } = await supabase\n        .from('location_sharing_settings')\n        .upsert({\n          user_id: user.id,\n          family_id: currentFamily.id,\n          share_location: updatedSettings.shareLocation,\n          share_with_all: updatedSettings.shareWithAll,\n          share_precise_location: updatedSettings.sharePreciseLocation,\n          update_frequency: updatedSettings.updateFrequency,\n          updated_at: new Date().toISOString(),\n        }, {\n          onConflict: 'user_id,family_id',\n        });\n\n      if (upsertError) {\n        setError('Error saving settings');\n        return;\n      }\n\n      setSettings(updatedSettings);\n      setError(null);\n    } catch (err) {\n      setError('Error saving settings');\n    }\n  }, [currentFamily?.id, supabase, settings]);\n\n  // Enable location sharing\n  const enableLocationSharing = useCallback(async () => {\n    try {\n      const hasPermission = await requestPermission();\n      if (hasPermission) {\n        await saveSettings({ shareLocation: true });\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Error enabling location sharing:', error);\n      return false;\n    }\n  }, [requestPermission, saveSettings]);\n\n  // Disable location sharing\n  const disableLocationSharing = useCallback(async () => {\n    await saveSettings({ shareLocation: false });\n    setIsTracking(false);\n  }, [saveSettings]);\n\n  // Initialize on mount\n  useEffect(() => {\n    const init = async () => {\n      setIsLoading(true);\n      await checkPermission();\n      await loadSettings();\n      await fetchFamilyLocations();\n      setIsLoading(false);\n    };\n\n    init();\n  }, [checkPermission, loadSettings, fetchFamilyLocations]);\n\n  // Auto-start tracking if enabled\n  // Auto-start tracking if enabled\n  useEffect(() => {\n    if (settings.shareLocation && permissionStatus === 'granted') {\n      setIsTracking(true);\n      const cleanup = startTracking();\n      return () => {\n        if (cleanup) cleanup();\n        setIsTracking(false);\n      };\n    } else {\n      setIsTracking(false);\n    }\n  }, [settings.shareLocation, permissionStatus, startTracking]);\n\n  // Refresh family locations periodically\n  useEffect(() => {\n    if (!currentFamily?.id) return;\n\n    const interval = setInterval(fetchFamilyLocations, 30000); // Every 30 seconds\n    return () => clearInterval(interval);\n  }, [currentFamily?.id, fetchFamilyLocations]);\n\n  return {\n    // State\n    permissionStatus,\n    isTracking,\n    currentLocation,\n    familyLocations,\n    settings,\n    isLoading,\n    error,\n    isGeolocationAvailable,\n\n    // Actions\n    requestPermission,\n    enableLocationSharing,\n    disableLocationSharing,\n    saveSettings,\n    refreshLocations: fetchFamilyLocations,\n    updateLocationManually: updateLocation,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 871, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/app/%28dashboard%29/security/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useMemo } from 'react';\nimport Link from 'next/link';\nimport dynamic from 'next/dynamic';\nimport {\n  Container,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  Avatar,\n  Badge,\n  Tabs,\n  TabList,\n  TabTrigger,\n  TabContent,\n  Skeleton,\n} from '@kintree/ui';\nimport { useFamilyTree } from '@/hooks/useFamilyTree';\nimport { useLocationTracking } from '@/hooks/useLocationTracking';\n\n// Dynamically import components\nconst FamilyMap = dynamic(() => import('@/components/FamilyMap'), {\n  ssr: false,\n  loading: () => (\n    <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-neutral-50 to-primary-50/30\">\n      <div className=\"text-center\">\n        <div className=\"w-12 h-12 mx-auto mb-4 rounded-full border-4 border-primary-200 border-t-primary-500 animate-spin\" />\n        <p className=\"text-neutral-500\">Loading map...</p>\n      </div>\n    </div>\n  ),\n});\n\nconst LocationPermissionModal = dynamic(() => import('@/components/LocationPermissionModal'), {\n  ssr: false,\n});\n\ninterface FamilyMemberDisplay {\n  id: string;\n  name: string;\n  photoUrl: string | null;\n  status: 'online' | 'away' | 'offline';\n  lastSeen: string | null;\n  location: { lat: number; lng: number; address: string } | null;\n  batteryLevel: number | null;\n  linkedUserId: string | null;\n}\n\nexport default function SecurityPage() {\n  const [activeTab, setActiveTab] = useState('map');\n  const [selectedMember, setSelectedMember] = useState<string | null>(null);\n  const [showPermissionModal, setShowPermissionModal] = useState(false);\n\n  const { persons, isLoading: personsLoading } = useFamilyTree();\n  const {\n    familyLocations,\n    settings,\n    permissionStatus,\n    isTracking,\n    enableLocationSharing,\n    disableLocationSharing,\n    isLoading: locationLoading,\n  } = useLocationTracking();\n\n  // Combine persons data with real location data\n  const familyMembersWithLocation: FamilyMemberDisplay[] = useMemo(() => {\n    return persons.map((person) => {\n      // Find real location data for this person\n      const locationData = familyLocations.find(loc => loc.personId === person.id);\n\n      if (locationData) {\n        // Has real location data\n        const now = new Date();\n        const lastUpdate = new Date(locationData.lastUpdatedAt);\n        const minutesSinceUpdate = (now.getTime() - lastUpdate.getTime()) / 60000;\n\n        let status: 'online' | 'away' | 'offline' = 'offline';\n        if (minutesSinceUpdate < 5) {\n          status = 'online';\n        } else if (minutesSinceUpdate < 30) {\n          status = 'away';\n        }\n\n        return {\n          id: person.id,\n          name: `${person.firstName} ${person.lastName || ''}`.trim(),\n          photoUrl: person.photoUrl || locationData.photoUrl,\n          status,\n          lastSeen: locationData.lastUpdatedAt,\n          location: {\n            lat: locationData.latitude,\n            lng: locationData.longitude,\n            address: locationData.address || locationData.city || 'Unknown location',\n          },\n          batteryLevel: locationData.batteryLevel,\n          linkedUserId: locationData.userId,\n        };\n      }\n\n      // No location data - check if has linked user\n      return {\n        id: person.id,\n        name: `${person.firstName} ${person.lastName || ''}`.trim(),\n        photoUrl: person.photoUrl || null,\n        status: 'offline' as const,\n        lastSeen: null,\n        location: null,\n        batteryLevel: null,\n        linkedUserId: person.linkedUserId || null,\n      };\n    });\n  }, [persons, familyLocations]);\n\n  const activeMembersCount = familyMembersWithLocation.filter(m => m.status !== 'offline').length;\n  const membersWithLocationCount = familyMembersWithLocation.filter(m => m.location !== null).length;\n\n  const isLoading = personsLoading || locationLoading;\n\n  if (isLoading) {\n    return (\n      <Container size=\"full\" padding={false}>\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\n          <div>\n            <Skeleton width={200} height={32} />\n            <Skeleton width={300} height={20} className=\"mt-2\" />\n          </div>\n        </div>\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n          <div className=\"lg:col-span-1\">\n            <Skeleton height={300} className=\"rounded-2xl\" />\n          </div>\n          <div className=\"lg:col-span-3\">\n            <Skeleton height={600} className=\"rounded-2xl\" />\n          </div>\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container size=\"full\" padding={false}>\n      {/* Header with gradient text */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gradient-primary\">Family Security</h1>\n          <p className=\"text-neutral-500 mt-1\">Location tracking and safety zones</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          {/* Location sharing toggle */}\n          {permissionStatus === 'granted' ? (\n            <Button\n              variant={settings.shareLocation ? 'primary' : 'outline'}\n              leftIcon={<LocationIcon />}\n              onClick={() => settings.shareLocation ? disableLocationSharing() : enableLocationSharing()}\n            >\n              {settings.shareLocation ? 'Sharing' : 'Share'}\n            </Button>\n          ) : (\n            <Button\n              variant=\"primary\"\n              leftIcon={<LocationIcon />}\n              onClick={() => setShowPermissionModal(true)}\n            >\n              Enable Location\n            </Button>\n          )}\n          <Link href=\"/security/zones\">\n            <Button variant=\"outline\" leftIcon={<ZoneIcon />}>\n              Zones\n            </Button>\n          </Link>\n          <Link href=\"/security/history\">\n            <Button variant=\"outline\" leftIcon={<HistoryIcon />}>\n              History\n            </Button>\n          </Link>\n        </div>\n      </div>\n\n      {/* Tracking status banner */}\n      {isTracking && (\n        <div className=\"mb-4 p-3 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 flex items-center gap-3\">\n          <div className=\"w-3 h-3 rounded-full bg-green-500 animate-pulse\" />\n          <p className=\"text-sm text-green-700\">\n            Your location is being shared with your family\n          </p>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={disableLocationSharing}\n            className=\"ml-auto text-green-600 hover:text-green-700\"\n          >\n            Disable\n          </Button>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Family Members Panel */}\n        <div className=\"lg:col-span-1 space-y-4\">\n          <Card padding=\"md\" className=\"hover-lift\">\n            <CardHeader\n              title=\"Family Members\"\n              subtitle={`${familyMembersWithLocation.length} members Â· ${membersWithLocationCount} with location`}\n            />\n            <CardContent>\n              {familyMembersWithLocation.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center\">\n                    <UsersIcon className=\"w-8 h-8 text-primary-500\" />\n                  </div>\n                  <p className=\"text-neutral-500 text-sm mb-3\">No family members yet.</p>\n                  <Link href=\"/tree\">\n                    <Button variant=\"outline\" size=\"sm\">\n                      Add members\n                    </Button>\n                  </Link>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {familyMembersWithLocation.map((member, index) => (\n                    <button\n                      key={member.id}\n                      onClick={() => setSelectedMember(member.id)}\n                      className={`w-full flex items-center gap-3 p-3 rounded-xl transition-all animate-slide-up ${selectedMember === member.id\n                          ? 'bg-gradient-to-r from-primary-50 to-secondary-50 border border-primary-200 shadow-sm'\n                          : 'hover:bg-neutral-50 border border-transparent'\n                        }`}\n                      style={{ animationDelay: `${index * 50}ms` }}\n                    >\n                      <div className=\"relative\">\n                        <Avatar name={member.name} size=\"md\" ringColor={selectedMember === member.id ? 'primary' : undefined} />\n                        <span\n                          className={`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white ${member.status === 'online'\n                              ? 'bg-gradient-to-br from-green-400 to-emerald-500 shadow-sm shadow-green-300'\n                              : member.status === 'away'\n                                ? 'bg-gradient-to-br from-amber-400 to-orange-500 shadow-sm shadow-amber-300'\n                                : 'bg-neutral-300'\n                            }`}\n                        />\n                      </div>\n                      <div className=\"flex-1 text-left min-w-0\">\n                        <p className=\"font-medium text-neutral-900 truncate\">{member.name}</p>\n                        <p className=\"text-xs text-neutral-500 truncate\">\n                          {member.location?.address || (member.linkedUserId ? 'Location not shared' : 'No linked account')}\n                        </p>\n                      </div>\n                      <div className=\"flex flex-col items-end\">\n                        {member.batteryLevel !== null ? (\n                          <BatteryIndicator level={member.batteryLevel} />\n                        ) : (\n                          <span className=\"text-xs text-neutral-300\">--</span>\n                        )}\n                        <span className=\"text-xs text-neutral-400 mt-1\">\n                          {member.lastSeen ? formatLastSeen(member.lastSeen) : 'Never'}\n                        </span>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Quick Stats with glassmorphism */}\n          <Card padding=\"md\" variant=\"glass\" className=\"hover-lift\">\n            <CardHeader title=\"Security Status\" />\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between p-3 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-100\">\n                  <span className=\"text-neutral-700 font-medium\">All safe</span>\n                  <Badge variant=\"success\" glow>\n                    <CheckIcon className=\"w-3 h-3 mr-1\" />\n                    OK\n                  </Badge>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-neutral-600\">Active members</span>\n                  <span className=\"font-bold text-primary-600\">{activeMembersCount}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-neutral-600\">Sharing location</span>\n                  <span className=\"font-bold text-neutral-800\">{membersWithLocationCount}</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-neutral-600\">Alerts today</span>\n                  <span className=\"font-bold text-neutral-800\">0</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Map Area */}\n        <div className=\"lg:col-span-3\">\n          <Tabs value={activeTab} onChange={setActiveTab}>\n            <TabList className=\"mb-4\">\n              <TabTrigger value=\"map\">Live Map</TabTrigger>\n              <TabTrigger value=\"alerts\">Alerts</TabTrigger>\n            </TabList>\n\n            <TabContent value=\"map\">\n              {/* Map container with gradient border */}\n              <div className=\"relative p-[2px] rounded-2xl bg-gradient-to-br from-primary-400 via-secondary-400 to-accent-400\">\n                <Card variant=\"default\" padding=\"none\" className=\"h-[600px] rounded-2xl overflow-hidden\">\n                  <FamilyMap\n                    members={familyMembersWithLocation.map(m => ({\n                      id: m.id,\n                      name: m.name,\n                      photoUrl: m.photoUrl,\n                      status: m.status,\n                      location: m.location,\n                      isSelected: selectedMember === m.id,\n                    }))}\n                    selectedMemberId={selectedMember}\n                    onMemberSelect={setSelectedMember}\n                    className=\"w-full h-full\"\n                  />\n                </Card>\n              </div>\n            </TabContent>\n\n            <TabContent value=\"alerts\">\n              <Card padding=\"lg\" className=\"hover-lift\">\n                <div className=\"text-center py-16\">\n                  <div className=\"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center\">\n                    <BellIcon className=\"w-10 h-10 text-primary-500\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-neutral-800 mb-3\">No alerts</h3>\n                  <p className=\"text-neutral-500 max-w-sm mx-auto\">\n                    All your family members are in safe zones.\n                    You will receive notifications when someone enters or leaves a configured zone.\n                  </p>\n                </div>\n              </Card>\n            </TabContent>\n          </Tabs>\n        </div>\n      </div>\n\n      {/* Location Permission Modal */}\n      <LocationPermissionModal\n        isOpen={showPermissionModal}\n        onClose={() => setShowPermissionModal(false)}\n        onEnable={enableLocationSharing}\n        onSkip={() => setShowPermissionModal(false)}\n      />\n    </Container>\n  );\n}\n\nfunction formatLastSeen(timestamp: string): string {\n  const diff = Date.now() - new Date(timestamp).getTime();\n  const minutes = Math.floor(diff / 60000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  const hours = Math.floor(minutes / 60);\n  if (hours < 24) return `${hours}h ago`;\n  return `${Math.floor(hours / 24)}d ago`;\n}\n\nfunction BatteryIndicator({ level }: { level: number }) {\n  const gradientClass = level > 50\n    ? 'from-green-400 to-emerald-500'\n    : level > 20\n      ? 'from-amber-400 to-orange-500'\n      : 'from-red-400 to-rose-500';\n\n  return (\n    <div className=\"flex items-center gap-1.5\">\n      <div className=\"relative w-5 h-3\">\n        <div className=\"absolute inset-0 rounded-sm border border-neutral-300 overflow-hidden\">\n          <div\n            className={`h-full bg-gradient-to-r ${gradientClass} transition-all`}\n            style={{ width: `${level}%` }}\n          />\n        </div>\n        <div className=\"absolute -right-0.5 top-1/2 -translate-y-1/2 w-0.5 h-1.5 bg-neutral-300 rounded-r-full\" />\n      </div>\n      <span className=\"text-xs font-medium text-neutral-600\">{level}%</span>\n    </div>\n  );\n}\n\n// Icons\nfunction LocationIcon() {\n  return (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z\" />\n      <circle cx=\"12\" cy=\"10\" r=\"3\" />\n    </svg>\n  );\n}\n\nfunction ZoneIcon() {\n  return (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <polygon points=\"12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2\" />\n      <path d=\"M12 22V15.5M22 8.5L12 15.5 2 8.5\" />\n    </svg>\n  );\n}\n\nfunction HistoryIcon() {\n  return (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M12 6v6l4 2\" />\n    </svg>\n  );\n}\n\nfunction BellIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className || 'w-4 h-4'} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n      <path d=\"M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0\" />\n    </svg>\n  );\n}\n\nfunction CheckIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className || 'w-4 h-4'} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M20 6L9 17l-5-5\" />\n    </svg>\n  );\n}\n\nfunction UsersIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className || 'w-4 h-4'} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2\" />\n      <circle cx=\"9\" cy=\"7\" r=\"4\" />\n      <path d=\"M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75\" />\n    </svg>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1996, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/node_modules/next/src/shared/lib/lazy-dynamic/dynamic-bailout-to-csr.tsx"],"sourcesContent":["'use client'\n\nimport type { ReactElement } from 'react'\nimport { BailoutToCSRError } from './bailout-to-csr'\n\ninterface BailoutToCSRProps {\n  reason: string\n  children: ReactElement\n}\n\n/**\n * If rendered on the server, this component throws an error\n * to signal Next.js that it should bail out to client-side rendering instead.\n */\nexport function BailoutToCSR({ reason, children }: BailoutToCSRProps) {\n  if (typeof window === 'undefined') {\n    throw new BailoutToCSRError(reason)\n  }\n\n  return children\n}\n"],"names":["BailoutToCSR","reason","children","window","BailoutToCSRError"],"mappings":";;;+BAcgBA,gBAAAA;;;eAAAA;;;8BAXkB;AAW3B,SAASA,aAAa,EAAEC,MAAM,EAAEC,QAAQ,EAAqB;IAClE,IAAI,OAAOC,WAAW,aAAa;QACjC,MAAM,OAAA,cAA6B,CAA7B,IAAIC,cAAAA,iBAAiB,CAACH,SAAtB,qBAAA;mBAAA;wBAAA;0BAAA;QAA4B;IACpC;IAEA,OAAOC;AACT","ignoreList":[0]}},
    {"offset": {"line": 2020, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/node_modules/next/src/shared/lib/encode-uri-path.ts"],"sourcesContent":["export function encodeURIPath(file: string) {\n  return file\n    .split('/')\n    .map((p) => encodeURIComponent(p))\n    .join('/')\n}\n"],"names":["encodeURIPath","file","split","map","p","encodeURIComponent","join"],"mappings":";;;+BAAgBA,iBAAAA;;;eAAAA;;;AAAT,SAASA,cAAcC,IAAY;IACxC,OAAOA,KACJC,KAAK,CAAC,KACNC,GAAG,CAAC,CAACC,IAAMC,mBAAmBD,IAC9BE,IAAI,CAAC;AACV","ignoreList":[0]}},
    {"offset": {"line": 2036, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/node_modules/next/src/shared/lib/lazy-dynamic/preload-chunks.tsx"],"sourcesContent":["'use client'\n\nimport { preload } from 'react-dom'\n\nimport { workAsyncStorage } from '../../../server/app-render/work-async-storage.external'\nimport { encodeURIPath } from '../encode-uri-path'\nimport { getDeploymentIdQueryOrEmptyString } from '../deployment-id'\n\nexport function PreloadChunks({\n  moduleIds,\n}: {\n  moduleIds: string[] | undefined\n}) {\n  // Early return in client compilation and only load requestStore on server side\n  if (typeof window !== 'undefined') {\n    return null\n  }\n\n  const workStore = workAsyncStorage.getStore()\n  if (workStore === undefined) {\n    return null\n  }\n\n  const allFiles = []\n\n  // Search the current dynamic call unique key id in react loadable manifest,\n  // and find the corresponding CSS files to preload\n  if (workStore.reactLoadableManifest && moduleIds) {\n    const manifest = workStore.reactLoadableManifest\n    for (const key of moduleIds) {\n      if (!manifest[key]) continue\n      const chunks = manifest[key].files\n      allFiles.push(...chunks)\n    }\n  }\n\n  if (allFiles.length === 0) {\n    return null\n  }\n\n  const dplId = getDeploymentIdQueryOrEmptyString()\n\n  return (\n    <>\n      {allFiles.map((chunk) => {\n        const href = `${workStore.assetPrefix}/_next/${encodeURIPath(chunk)}${dplId}`\n        const isCss = chunk.endsWith('.css')\n        // If it's stylesheet we use `precedence` o help hoist with React Float.\n        // For stylesheets we actually need to render the CSS because nothing else is going to do it so it needs to be part of the component tree.\n        // The `preload` for stylesheet is not optional.\n        if (isCss) {\n          return (\n            <link\n              key={chunk}\n              // @ts-ignore\n              precedence=\"dynamic\"\n              href={href}\n              rel=\"stylesheet\"\n              as=\"style\"\n              nonce={workStore.nonce}\n            />\n          )\n        } else {\n          // If it's script we use ReactDOM.preload to preload the resources\n          preload(href, {\n            as: 'script',\n            fetchPriority: 'low',\n            nonce: workStore.nonce,\n          })\n          return null\n        }\n      })}\n    </>\n  )\n}\n"],"names":["PreloadChunks","moduleIds","window","workStore","workAsyncStorage","getStore","undefined","allFiles","reactLoadableManifest","manifest","key","chunks","files","push","length","dplId","getDeploymentIdQueryOrEmptyString","map","chunk","href","assetPrefix","encodeURIPath","isCss","endsWith","link","precedence","rel","as","nonce","preload","fetchPriority"],"mappings":";;;+BAQgBA,iBAAAA;;;eAAAA;;;;0BANQ;0CAES;+BACH;8BACoB;AAE3C,SAASA,cAAc,EAC5BC,SAAS,EAGV;IACC,+EAA+E;IAC/E,IAAI,OAAOC,WAAW,aAAa;QACjC,OAAO;IACT;IAEA,MAAMC,YAAYC,0BAAAA,gBAAgB,CAACC,QAAQ;IAC3C,IAAIF,cAAcG,WAAW;QAC3B,OAAO;IACT;IAEA,MAAMC,WAAW,EAAE;IAEnB,4EAA4E;IAC5E,kDAAkD;IAClD,IAAIJ,UAAUK,qBAAqB,IAAIP,WAAW;QAChD,MAAMQ,WAAWN,UAAUK,qBAAqB;QAChD,KAAK,MAAME,OAAOT,UAAW;YAC3B,IAAI,CAACQ,QAAQ,CAACC,IAAI,EAAE;YACpB,MAAMC,SAASF,QAAQ,CAACC,IAAI,CAACE,KAAK;YAClCL,SAASM,IAAI,IAAIF;QACnB;IACF;IAEA,IAAIJ,SAASO,MAAM,KAAK,GAAG;QACzB,OAAO;IACT;IAEA,MAAMC,QAAQC,CAAAA,GAAAA,cAAAA,iCAAiC;IAE/C,OAAA,WAAA,GACE,CAAA,GAAA,YAAA,GAAA,EAAA,YAAA,QAAA,EAAA;kBACGT,SAASU,GAAG,CAAC,CAACC;YACb,MAAMC,OAAO,GAAGhB,UAAUiB,WAAW,CAAC,OAAO,EAAEC,CAAAA,GAAAA,eAAAA,aAAa,EAACH,SAASH,OAAO;YAC7E,MAAMO,QAAQJ,MAAMK,QAAQ,CAAC;YAC7B,wEAAwE;YACxE,0IAA0I;YAC1I,gDAAgD;YAChD,IAAID,OAAO;gBACT,OAAA,WAAA,GACE,CAAA,GAAA,YAAA,GAAA,EAACE,QAAAA;oBAEC,aAAa;oBACbC,YAAW;oBACXN,MAAMA;oBACNO,KAAI;oBACJC,IAAG;oBACHC,OAAOzB,UAAUyB,KAAK;mBANjBV;YASX,OAAO;gBACL,kEAAkE;gBAClEW,CAAAA,GAAAA,UAAAA,OAAO,EAACV,MAAM;oBACZQ,IAAI;oBACJG,eAAe;oBACfF,OAAOzB,UAAUyB,KAAK;gBACxB;gBACA,OAAO;YACT;QACF;;AAGN","ignoreList":[0]}},
    {"offset": {"line": 2106, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/node_modules/next/src/shared/lib/lazy-dynamic/loadable.tsx"],"sourcesContent":["import { Suspense, Fragment, lazy } from 'react'\nimport { BailoutToCSR } from './dynamic-bailout-to-csr'\nimport type { ComponentModule } from './types'\nimport { PreloadChunks } from './preload-chunks'\n\n// Normalize loader to return the module as form { default: Component } for `React.lazy`.\n// Also for backward compatible since next/dynamic allows to resolve a component directly with loader\n// Client component reference proxy need to be converted to a module.\nfunction convertModule<P>(\n  mod: React.ComponentType<P> | ComponentModule<P> | undefined\n): {\n  default: React.ComponentType<P>\n} {\n  // Check \"default\" prop before accessing it, as it could be client reference proxy that could break it reference.\n  // Cases:\n  // mod: { default: Component }\n  // mod: Component\n  // mod: { default: proxy(Component) }\n  // mod: proxy(Component)\n  const hasDefault = mod && 'default' in mod\n  return {\n    default: hasDefault\n      ? (mod as ComponentModule<P>).default\n      : (mod as React.ComponentType<P>),\n  }\n}\n\nconst defaultOptions = {\n  loader: () => Promise.resolve(convertModule(() => null)),\n  loading: null,\n  ssr: true,\n}\n\ninterface LoadableOptions {\n  loader?: () => Promise<React.ComponentType<any> | ComponentModule<any>>\n  loading?: React.ComponentType<any> | null\n  ssr?: boolean\n  modules?: string[]\n}\n\nfunction Loadable(options: LoadableOptions) {\n  const opts = { ...defaultOptions, ...options }\n  const Lazy = lazy(() => opts.loader().then(convertModule))\n  const Loading = opts.loading\n\n  function LoadableComponent(props: any) {\n    const fallbackElement = Loading ? (\n      <Loading isLoading={true} pastDelay={true} error={null} />\n    ) : null\n\n    // If it's non-SSR or provided a loading component, wrap it in a suspense boundary\n    const hasSuspenseBoundary = !opts.ssr || !!opts.loading\n    const Wrap = hasSuspenseBoundary ? Suspense : Fragment\n    const wrapProps = hasSuspenseBoundary ? { fallback: fallbackElement } : {}\n    const children = opts.ssr ? (\n      <>\n        {/* During SSR, we need to preload the CSS from the dynamic component to avoid flash of unstyled content */}\n        {typeof window === 'undefined' ? (\n          <PreloadChunks moduleIds={opts.modules} />\n        ) : null}\n        <Lazy {...props} />\n      </>\n    ) : (\n      <BailoutToCSR reason=\"next/dynamic\">\n        <Lazy {...props} />\n      </BailoutToCSR>\n    )\n\n    return <Wrap {...wrapProps}>{children}</Wrap>\n  }\n\n  LoadableComponent.displayName = 'LoadableComponent'\n\n  return LoadableComponent\n}\n\nexport default Loadable\n"],"names":["convertModule","mod","hasDefault","default","defaultOptions","loader","Promise","resolve","loading","ssr","Loadable","options","opts","Lazy","lazy","then","Loading","LoadableComponent","props","fallbackElement","isLoading","pastDelay","error","hasSuspenseBoundary","Wrap","Suspense","Fragment","wrapProps","fallback","children","window","PreloadChunks","moduleIds","modules","BailoutToCSR","reason","displayName"],"mappings":";;;+BA4EA,WAAA;;;eAAA;;;;uBA5EyC;qCACZ;+BAEC;AAE9B,yFAAyF;AACzF,qGAAqG;AACrG,qEAAqE;AACrE,SAASA,cACPC,GAA4D;IAI5D,iHAAiH;IACjH,SAAS;IACT,8BAA8B;IAC9B,iBAAiB;IACjB,qCAAqC;IACrC,wBAAwB;IACxB,MAAMC,aAAaD,OAAO,aAAaA;IACvC,OAAO;QACLE,SAASD,aACJD,IAA2BE,OAAO,GAClCF;IACP;AACF;AAEA,MAAMG,iBAAiB;IACrBC,QAAQ,IAAMC,QAAQC,OAAO,CAACP,cAAc,IAAM;IAClDQ,SAAS;IACTC,KAAK;AACP;AASA,SAASC,SAASC,OAAwB;IACxC,MAAMC,OAAO;QAAE,GAAGR,cAAc;QAAE,GAAGO,OAAO;IAAC;IAC7C,MAAME,OAAAA,WAAAA,GAAOC,CAAAA,GAAAA,OAAAA,IAAI,EAAC,IAAMF,KAAKP,MAAM,GAAGU,IAAI,CAACf;IAC3C,MAAMgB,UAAUJ,KAAKJ,OAAO;IAE5B,SAASS,kBAAkBC,KAAU;QACnC,MAAMC,kBAAkBH,UAAAA,WAAAA,GACtB,CAAA,GAAA,YAAA,GAAA,EAACA,SAAAA;YAAQI,WAAW;YAAMC,WAAW;YAAMC,OAAO;aAChD;QAEJ,kFAAkF;QAClF,MAAMC,sBAAsB,CAACX,KAAKH,GAAG,IAAI,CAAC,CAACG,KAAKJ,OAAO;QACvD,MAAMgB,OAAOD,sBAAsBE,OAAAA,QAAQ,GAAGC,OAAAA,QAAQ;QACtD,MAAMC,YAAYJ,sBAAsB;YAAEK,UAAUT;QAAgB,IAAI,CAAC;QACzE,MAAMU,WAAWjB,KAAKH,GAAG,GAAA,WAAA,GACvB,CAAA,GAAA,YAAA,IAAA,EAAA,YAAA,QAAA,EAAA;;gBAEG,OAAOqB,WAAW,cAAA,WAAA,GACjB,CAAA,GAAA,YAAA,GAAA,EAACC,eAAAA,aAAa,EAAA;oBAACC,WAAWpB,KAAKqB,OAAO;qBACpC;8BACJ,CAAA,GAAA,YAAA,GAAA,EAACpB,MAAAA;oBAAM,GAAGK,KAAK;;;2BAGjB,CAAA,GAAA,YAAA,GAAA,EAACgB,qBAAAA,YAAY,EAAA;YAACC,QAAO;sBACnB,WAAA,GAAA,CAAA,GAAA,YAAA,GAAA,EAACtB,MAAAA;gBAAM,GAAGK,KAAK;;;QAInB,OAAA,WAAA,GAAO,CAAA,GAAA,YAAA,GAAA,EAACM,MAAAA;YAAM,GAAGG,SAAS;sBAAGE;;IAC/B;IAEAZ,kBAAkBmB,WAAW,GAAG;IAEhC,OAAOnB;AACT;MAEA,WAAeP","ignoreList":[0]}},
    {"offset": {"line": 2186, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/node_modules/next/src/shared/lib/app-dynamic.tsx"],"sourcesContent":["import type React from 'react'\nimport type { JSX } from 'react'\nimport Loadable from './lazy-dynamic/loadable'\n\nimport type {\n  LoadableGeneratedOptions,\n  DynamicOptionsLoadingProps,\n  Loader,\n  LoaderComponent,\n} from './lazy-dynamic/types'\n\nexport {\n  type LoadableGeneratedOptions,\n  type DynamicOptionsLoadingProps,\n  type Loader,\n  type LoaderComponent,\n}\n\nexport type DynamicOptions<P = {}> = LoadableGeneratedOptions & {\n  loading?: () => JSX.Element | null\n  loader?: Loader<P>\n  loadableGenerated?: LoadableGeneratedOptions\n  modules?: string[]\n  ssr?: boolean\n}\n\nexport type LoadableOptions<P = {}> = DynamicOptions<P>\n\nexport type LoadableFn<P = {}> = (\n  opts: LoadableOptions<P>\n) => React.ComponentType<P>\n\nexport type LoadableComponent<P = {}> = React.ComponentType<P>\n\nexport default function dynamic<P = {}>(\n  dynamicOptions: DynamicOptions<P> | Loader<P>,\n  options?: DynamicOptions<P>\n): React.ComponentType<P> {\n  const loadableOptions: LoadableOptions<P> = {}\n\n  if (typeof dynamicOptions === 'function') {\n    loadableOptions.loader = dynamicOptions\n  }\n\n  const mergedOptions = {\n    ...loadableOptions,\n    ...options,\n  }\n\n  return Loadable({\n    ...mergedOptions,\n    modules: mergedOptions.loadableGenerated?.modules,\n  })\n}\n"],"names":["dynamic","dynamicOptions","options","loadableOptions","loader","mergedOptions","Loadable","modules","loadableGenerated"],"mappings":";;;+BAkCA,WAAA;;;eAAwBA;;;;mEAhCH;AAgCN,SAASA,QACtBC,cAA6C,EAC7CC,OAA2B;IAE3B,MAAMC,kBAAsC,CAAC;IAE7C,IAAI,OAAOF,mBAAmB,YAAY;QACxCE,gBAAgBC,MAAM,GAAGH;IAC3B;IAEA,MAAMI,gBAAgB;QACpB,GAAGF,eAAe;QAClB,GAAGD,OAAO;IACZ;IAEA,OAAOI,CAAAA,GAAAA,UAAAA,OAAQ,EAAC;QACd,GAAGD,aAAa;QAChBE,SAASF,cAAcG,iBAAiB,EAAED;IAC5C;AACF","ignoreList":[0]}}]
}