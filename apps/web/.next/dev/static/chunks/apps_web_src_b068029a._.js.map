{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/lib/supabase.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr';\n\n// Browser client singleton\nlet browserClient: ReturnType<typeof createBrowserClient> | null = null;\n\n// Lazy getter for environment variables\nfunction getEnvVars() {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    // Return placeholder values during build time\n    // This prevents build errors - actual functionality requires real env vars\n    return {\n      url: 'https://placeholder.supabase.co',\n      key: 'placeholder-anon-key-for-build-time-only',\n    };\n  }\n\n  return { url: supabaseUrl, key: supabaseAnonKey };\n}\n\n/**\n * Create a Supabase client for browser/client components\n */\nexport function createClient() {\n  if (browserClient) return browserClient;\n\n  const { url, key } = getEnvVars();\n  browserClient = createBrowserClient(url, key);\n  return browserClient;\n}\n\n/**\n * Get the Supabase client (alias for createClient)\n */\nexport function getSupabaseClient() {\n  return createClient();\n}\n"],"names":[],"mappings":";;;;;;AAOsB;AAPtB;AAAA;;AAEA,2BAA2B;AAC3B,IAAI,gBAA+D;AAEnE,wCAAwC;AACxC,SAAS;IACP,MAAM;IACN,MAAM;IAEN;;IASA,OAAO;QAAE,KAAK;QAAa,KAAK;IAAgB;AAClD;AAKO,SAAS;IACd,IAAI,eAAe,OAAO;IAE1B,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;IACrB,gBAAgB,IAAA,oMAAmB,EAAC,KAAK;IACzC,OAAO;AACT;AAKO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/stores/authStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport type { User as SupabaseUser, Session as SupabaseSession } from '@supabase/supabase-js';\n\nexport interface User {\n  id: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  avatarUrl?: string;\n}\n\nexport interface Session {\n  accessToken: string;\n  refreshToken: string;\n  expiresAt: number;\n}\n\ninterface AuthState {\n  user: User | null;\n  session: Session | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n\n  // Actions\n  setUser: (user: User | null) => void;\n  setSession: (session: Session | null) => void;\n  setLoading: (loading: boolean) => void;\n  login: (user: User, session: Session) => void;\n  logout: () => void;\n  updateUser: (updates: Partial<User>) => void;\n\n  // Supabase sync\n  syncWithSupabase: (supabaseUser: SupabaseUser | null, supabaseSession: SupabaseSession | null) => void;\n}\n\n// Helper to convert Supabase user to our User type\nfunction mapSupabaseUser(supabaseUser: SupabaseUser): User {\n  const metadata = supabaseUser.user_metadata || {};\n\n  // Try to get first_name/last_name directly (custom signup)\n  // Then try given_name/family_name (Google OAuth)\n  // Finally fallback to parsing full_name/name\n  let firstName = metadata.first_name || metadata.given_name || '';\n  let lastName = metadata.last_name || metadata.family_name || '';\n\n  if (!firstName && !lastName) {\n    const fullName = metadata.full_name || metadata.name || '';\n    const nameParts = fullName.split(' ');\n    firstName = nameParts[0] || '';\n    lastName = nameParts.slice(1).join(' ') || '';\n  }\n\n  return {\n    id: supabaseUser.id,\n    email: supabaseUser.email || '',\n    firstName,\n    lastName,\n    avatarUrl: metadata.avatar_url || metadata.picture,\n  };\n}\n\n// Helper to convert Supabase session to our Session type\nfunction mapSupabaseSession(supabaseSession: SupabaseSession): Session {\n  return {\n    accessToken: supabaseSession.access_token,\n    refreshToken: supabaseSession.refresh_token || '',\n    expiresAt: supabaseSession.expires_at || 0,\n  };\n}\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      user: null,\n      session: null,\n      isLoading: true,\n      isAuthenticated: false,\n\n      setUser: (user) =>\n        set({\n          user,\n          isAuthenticated: !!user,\n        }),\n\n      setSession: (session) => set({ session }),\n\n      setLoading: (isLoading) => set({ isLoading }),\n\n      login: (user, session) =>\n        set({\n          user,\n          session,\n          isAuthenticated: true,\n          isLoading: false,\n        }),\n\n      logout: () =>\n        set({\n          user: null,\n          session: null,\n          isAuthenticated: false,\n        }),\n\n      updateUser: (updates) =>\n        set((state) => ({\n          user: state.user ? { ...state.user, ...updates } : null,\n        })),\n\n      syncWithSupabase: (supabaseUser, supabaseSession) => {\n        if (supabaseUser && supabaseSession) {\n          set({\n            user: mapSupabaseUser(supabaseUser),\n            session: mapSupabaseSession(supabaseSession),\n            isAuthenticated: true,\n            isLoading: false,\n          });\n        } else {\n          set({\n            user: null,\n            session: null,\n            isAuthenticated: false,\n            isLoading: false,\n          });\n        }\n      },\n    }),\n    {\n      name: 'kintree-auth',\n      partialize: (state) => ({\n        user: state.user,\n        session: state.session,\n        isAuthenticated: state.isAuthenticated,\n      }),\n    }\n  )\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAmCA,mDAAmD;AACnD,SAAS,gBAAgB,YAA0B;IACjD,MAAM,WAAW,aAAa,aAAa,IAAI,CAAC;IAEhD,2DAA2D;IAC3D,iDAAiD;IACjD,6CAA6C;IAC7C,IAAI,YAAY,SAAS,UAAU,IAAI,SAAS,UAAU,IAAI;IAC9D,IAAI,WAAW,SAAS,SAAS,IAAI,SAAS,WAAW,IAAI;IAE7D,IAAI,CAAC,aAAa,CAAC,UAAU;QAC3B,MAAM,WAAW,SAAS,SAAS,IAAI,SAAS,IAAI,IAAI;QACxD,MAAM,YAAY,SAAS,KAAK,CAAC;QACjC,YAAY,SAAS,CAAC,EAAE,IAAI;QAC5B,WAAW,UAAU,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ;IAC7C;IAEA,OAAO;QACL,IAAI,aAAa,EAAE;QACnB,OAAO,aAAa,KAAK,IAAI;QAC7B;QACA;QACA,WAAW,SAAS,UAAU,IAAI,SAAS,OAAO;IACpD;AACF;AAEA,yDAAyD;AACzD,SAAS,mBAAmB,eAAgC;IAC1D,OAAO;QACL,aAAa,gBAAgB,YAAY;QACzC,cAAc,gBAAgB,aAAa,IAAI;QAC/C,WAAW,gBAAgB,UAAU,IAAI;IAC3C;AACF;AAEO,MAAM,eAAe,IAAA,qJAAM,IAChC,IAAA,2JAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,MAAM;QACN,SAAS;QACT,WAAW;QACX,iBAAiB;QAEjB,SAAS,CAAC,OACR,IAAI;gBACF;gBACA,iBAAiB,CAAC,CAAC;YACrB;QAEF,YAAY,CAAC,UAAY,IAAI;gBAAE;YAAQ;QAEvC,YAAY,CAAC,YAAc,IAAI;gBAAE;YAAU;QAE3C,OAAO,CAAC,MAAM,UACZ,IAAI;gBACF;gBACA;gBACA,iBAAiB;gBACjB,WAAW;YACb;QAEF,QAAQ,IACN,IAAI;gBACF,MAAM;gBACN,SAAS;gBACT,iBAAiB;YACnB;QAEF,YAAY,CAAC,UACX,IAAI,CAAC,QAAU,CAAC;oBACd,MAAM,MAAM,IAAI,GAAG;wBAAE,GAAG,MAAM,IAAI;wBAAE,GAAG,OAAO;oBAAC,IAAI;gBACrD,CAAC;QAEH,kBAAkB,CAAC,cAAc;YAC/B,IAAI,gBAAgB,iBAAiB;gBACnC,IAAI;oBACF,MAAM,gBAAgB;oBACtB,SAAS,mBAAmB;oBAC5B,iBAAiB;oBACjB,WAAW;gBACb;YACF,OAAO;gBACL,IAAI;oBACF,MAAM;oBACN,SAAS;oBACT,iBAAiB;oBACjB,WAAW;gBACb;YACF;QACF;IACF,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACtB,MAAM,MAAM,IAAI;YAChB,SAAS,MAAM,OAAO;YACtB,iBAAiB,MAAM,eAAe;QACxC,CAAC;AACH"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/lib/auth-provider.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, type ReactNode } from 'react';\nimport { createClient } from './supabase';\nimport { useAuthStore } from '@/stores/authStore';\nimport type { User, Session } from '@supabase/supabase-js';\n\ninterface AuthContextType {\n  user: User | null;\n  session: Session | null;\n  isLoading: boolean;\n  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;\n  signUp: (email: string, password: string, metadata?: { firstName?: string; lastName?: string }) => Promise<{ error: Error | null; session: Session | null }>;\n  signOut: () => Promise<void>;\n  resetPassword: (email: string) => Promise<{ error: Error | null }>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const supabase = createClient();\n  const syncWithSupabase = useAuthStore((state) => state.syncWithSupabase);\n\n  useEffect(() => {\n    // Get initial session\n    const getSession = async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      setSession(session);\n      setUser(session?.user ?? null);\n      setIsLoading(false);\n      // Sync with Zustand store\n      syncWithSupabase(session?.user ?? null, session);\n    };\n\n    getSession();\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (_event: string, newSession: Session | null) => {\n        setSession(newSession);\n        setUser(newSession?.user ?? null);\n        setIsLoading(false);\n        // Sync with Zustand store\n        syncWithSupabase(newSession?.user ?? null, newSession);\n      }\n    );\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [supabase, syncWithSupabase]);\n\n  const signIn = async (email: string, password: string) => {\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    return { error: error as Error | null };\n  };\n\n  const signUp = async (\n    email: string,\n    password: string,\n    metadata?: { firstName?: string; lastName?: string }\n  ) => {\n    const { data, error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        data: {\n          first_name: metadata?.firstName || '',\n          last_name: metadata?.lastName || '',\n          full_name: `${metadata?.firstName || ''} ${metadata?.lastName || ''}`.trim(),\n        },\n      },\n    });\n    return { error: error as Error | null, session: data?.session || null };\n  };\n\n  const signOut = async () => {\n    await supabase.auth.signOut();\n  };\n\n  const resetPassword = async (email: string) => {\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n      redirectTo: `${window.location.origin}/auth/reset-password`,\n    });\n    return { error: error as Error | null };\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        session,\n        isLoading,\n        signIn,\n        signUp,\n        signOut,\n        resetPassword,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,WAAW,IAAA,wJAAY;IAC7B,MAAM,mBAAmB,IAAA,4JAAY;uDAAC,CAAC,QAAU,MAAM,gBAAgB;;IAEvE,IAAA,0KAAS;kCAAC;YACR,sBAAsB;YACtB,MAAM;qDAAa;oBACjB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;oBAC5D,WAAW;oBACX,QAAQ,SAAS,QAAQ;oBACzB,aAAa;oBACb,0BAA0B;oBAC1B,iBAAiB,SAAS,QAAQ,MAAM;gBAC1C;;YAEA;YAEA,0BAA0B;YAC1B,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;0CAChE,CAAC,QAAgB;oBACf,WAAW;oBACX,QAAQ,YAAY,QAAQ;oBAC5B,aAAa;oBACb,0BAA0B;oBAC1B,iBAAiB,YAAY,QAAQ,MAAM;gBAC7C;;YAGF;0CAAO;oBACL,aAAa,WAAW;gBAC1B;;QACF;iCAAG;QAAC;QAAU;KAAiB;IAE/B,MAAM,SAAS,OAAO,OAAe;QACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;YACvD;YACA;QACF;QACA,OAAO;YAAE,OAAO;QAAsB;IACxC;IAEA,MAAM,SAAS,OACb,OACA,UACA;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;YACjD;YACA;YACA,SAAS;gBACP,MAAM;oBACJ,YAAY,UAAU,aAAa;oBACnC,WAAW,UAAU,YAAY;oBACjC,WAAW,GAAG,UAAU,aAAa,GAAG,CAAC,EAAE,UAAU,YAAY,IAAI,CAAC,IAAI;gBAC5E;YACF;QACF;QACA,OAAO;YAAE,OAAO;YAAuB,SAAS,MAAM,WAAW;QAAK;IACxE;IAEA,MAAM,UAAU;QACd,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7B;IAEA,MAAM,gBAAgB,OAAO;QAC3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,qBAAqB,CAAC,OAAO;YACjE,YAAY,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,oBAAoB,CAAC;QAC7D;QACA,OAAO;YAAE,OAAO;QAAsB;IACxC;IAEA,qBACE,6LAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;GAzFgB;;QAKW,4JAAY;;;KALvB;AA2FT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { useState, type ReactNode } from 'react';\nimport { AuthProvider } from '@/lib/auth-provider';\n\ninterface ProvidersProps {\n  children: ReactNode;\n}\n\nexport function Providers({ children }: ProvidersProps) {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 60 * 1000, // 1 minute\n            refetchOnWindowFocus: false,\n          },\n        },\n      })\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        {children}\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAEA;AACA;;;AALA;;;;AAWO,SAAS,UAAU,EAAE,QAAQ,EAAkB;;IACpD,MAAM,CAAC,YAAY,GAAG,IAAA,yKAAQ;8BAC5B,IACE,IAAI,+LAAW,CAAC;gBACd,gBAAgB;oBACd,SAAS;wBACP,WAAW,KAAK;wBAChB,sBAAsB;oBACxB;gBACF;YACF;;IAGJ,qBACE,6LAAC,gNAAmB;QAAC,QAAQ;kBAC3B,cAAA,6LAAC,iKAAY;sBACV;;;;;;;;;;;AAIT;GApBgB;KAAA"}}]
}