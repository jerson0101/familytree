{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useFamily.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useCallback, useState, useMemo } from 'react';\nimport { useFamilyStore, type Family, type FamilyMember } from '@/stores/familyStore';\nimport { useAuthStore } from '@/stores/authStore';\nimport { createClient } from '@/lib/supabase';\nimport type { FamilyRole } from '@kintree/shared';\n\nexport interface CreateFamilyInput {\n  name: string;\n  description?: string;\n  primaryColor?: string;\n}\n\nexport function useFamily() {\n  const user = useAuthStore((state) => state.user);\n  const supabase = useMemo(() => createClient(), []);\n  const {\n    currentFamily,\n    families,\n    members,\n    currentUserRole,\n    isLoading,\n    setCurrentFamily,\n    setFamilies,\n    setMembers,\n    setCurrentUserRole,\n    setLoading,\n    reset,\n  } = useFamilyStore();\n\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch user's families on mount\n  useEffect(() => {\n    if (user?.id) {\n      fetchFamilies();\n    } else {\n      reset();\n    }\n  }, [user?.id]);\n\n  // Fetch family members when current family changes\n  useEffect(() => {\n    if (currentFamily?.id && user?.id) {\n      fetchMembers(currentFamily.id);\n      fetchUserRole(currentFamily.id);\n    }\n  }, [currentFamily?.id, user?.id]);\n\n  const fetchFamilies = useCallback(async () => {\n    if (!user?.id) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Get families where user is a member\n      const { data: memberData, error: memberError } = await supabase\n        .from('family_members')\n        .select(`\n          family_id,\n          role,\n          families (\n            id,\n            name,\n            description,\n            primary_color,\n            created_at\n          )\n        `)\n        .eq('user_id', user.id)\n        .eq('is_active', true);\n\n      if (memberError) throw memberError;\n\n      const familyList: Family[] = (memberData || [])\n        .filter((m: any) => m.families)\n        .map((m: any) => ({\n          id: (m.families as any).id,\n          name: (m.families as any).name,\n          description: (m.families as any).description,\n          primaryColor: (m.families as any).primary_color || '#0ea5e9',\n          createdAt: (m.families as any).created_at,\n          memberCount: 0, // Will be updated later\n        }));\n\n      setFamilies(familyList);\n\n      // Auto-select first family if none selected\n      if (familyList.length > 0 && !currentFamily) {\n        setCurrentFamily(familyList[0]);\n      }\n    } catch (err) {\n      console.error('Error fetching families:', err);\n      setError('Error loading families');\n    } finally {\n      setLoading(false);\n    }\n  }, [user?.id, currentFamily, setFamilies, setCurrentFamily, setLoading]);\n\n  const fetchMembers = useCallback(async (familyId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('family_members')\n        .select(`\n          id,\n          user_id,\n          person_id,\n          role,\n          accepted_at,\n          is_active\n        `)\n        .eq('family_id', familyId)\n        .eq('is_active', true);\n\n      if (error) throw error;\n\n      // Fetch user profiles separately to avoid join issues\n      const userIds = (data || []).map((m: any) => m.user_id);\n      let profilesMap: Record<string, any> = {};\n\n      if (userIds.length > 0) {\n        const { data: profiles } = await supabase\n          .from('user_profiles')\n          .select('id, email, first_name, last_name, avatar_url')\n          .in('id', userIds);\n\n        if (profiles) {\n          profilesMap = profiles.reduce((acc: any, p: any) => {\n            acc[p.id] = p;\n            return acc;\n          }, {});\n        }\n      }\n\n      const memberList: FamilyMember[] = (data || []).map((m: any) => {\n        const profile = profilesMap[m.user_id] || {};\n        return {\n          id: m.id,\n          userId: m.user_id,\n          personId: m.person_id || undefined,\n          role: m.role as FamilyRole,\n          email: profile.email || '',\n          displayName: `${profile.first_name || ''} ${profile.last_name || ''}`.trim() || 'User',\n          avatarUrl: profile.avatar_url,\n          joinedAt: m.accepted_at || '',\n          isActive: m.is_active,\n        };\n      });\n\n      setMembers(memberList);\n\n      // Update member count in current family\n      if (currentFamily) {\n        setCurrentFamily({ ...currentFamily, memberCount: memberList.length });\n      }\n    } catch (err) {\n      console.error('Error fetching members:', err);\n      setMembers([]);\n    }\n  }, [currentFamily, setMembers, setCurrentFamily]);\n\n  const fetchUserRole = useCallback(async (familyId: string) => {\n    if (!user?.id) return;\n\n    try {\n      const { data, error } = await supabase\n        .from('family_members')\n        .select('role')\n        .eq('family_id', familyId)\n        .eq('user_id', user.id)\n        .eq('is_active', true)\n        .maybeSingle();\n\n      if (error) throw error;\n\n      // data will be null if no record found, which is valid\n      setCurrentUserRole(data?.role as FamilyRole || null);\n    } catch (err) {\n      console.error('Error fetching user role:', err);\n      setCurrentUserRole(null);\n    }\n  }, [user?.id, setCurrentUserRole]);\n\n  const createFamily = useCallback(async (input: CreateFamilyInput): Promise<Family | null> => {\n    if (!user?.id) return null;\n\n    setError(null);\n\n    try {\n      const { data, error } = await supabase\n        .from('families')\n        .insert({\n          name: input.name,\n          description: input.description,\n          primary_color: input.primaryColor || '#0ea5e9',\n          created_by: user.id,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      const newFamily: Family = {\n        id: data.id,\n        name: data.name,\n        description: data.description,\n        primaryColor: data.primary_color,\n        createdAt: data.created_at,\n        memberCount: 1,\n      };\n\n      // Refresh families list\n      await fetchFamilies();\n\n      // Set as current family\n      setCurrentFamily(newFamily);\n\n      return newFamily;\n    } catch (err) {\n      console.error('Error creating family:', err);\n      setError('Error creating family');\n      return null;\n    }\n  }, [user?.id, fetchFamilies, setCurrentFamily]);\n\n  const inviteMember = useCallback(async (email: string, role: FamilyRole = 'viewer'): Promise<boolean> => {\n    if (!currentFamily?.id || !user?.id) return false;\n\n    setError(null);\n\n    try {\n      // First, find the user by email\n      const { data: userData, error: userError } = await supabase\n        .from('user_profiles')\n        .select('id')\n        .eq('email', email)\n        .single();\n\n      if (userError || !userData) {\n        setError('User not found with that email');\n        return false;\n      }\n\n      // Add them as a family member\n      const { error: memberError } = await supabase\n        .from('family_members')\n        .insert({\n          family_id: currentFamily.id,\n          user_id: userData.id,\n          role,\n          invited_by: user.id,\n        });\n\n      if (memberError) {\n        if (memberError.code === '23505') {\n          setError('User is already a member of this family');\n        } else {\n          throw memberError;\n        }\n        return false;\n      }\n\n      // Refresh members\n      await fetchMembers(currentFamily.id);\n\n      return true;\n    } catch (err) {\n      console.error('Error inviting member:', err);\n      setError('Error inviting member');\n      return false;\n    }\n  }, [currentFamily?.id, user?.id, fetchMembers]);\n\n  const updateMemberRole = useCallback(async (memberId: string, newRole: FamilyRole): Promise<boolean> => {\n    if (!currentFamily?.id) return false;\n\n    try {\n      const { error } = await supabase\n        .from('family_members')\n        .update({ role: newRole })\n        .eq('id', memberId);\n\n      if (error) throw error;\n\n      await fetchMembers(currentFamily.id);\n      return true;\n    } catch (err) {\n      console.error('Error updating member role:', err);\n      return false;\n    }\n  }, [currentFamily?.id, fetchMembers]);\n\n  const removeMember = useCallback(async (memberId: string): Promise<boolean> => {\n    if (!currentFamily?.id) return false;\n\n    try {\n      const { error } = await supabase\n        .from('family_members')\n        .update({ is_active: false })\n        .eq('id', memberId);\n\n      if (error) throw error;\n\n      await fetchMembers(currentFamily.id);\n      return true;\n    } catch (err) {\n      console.error('Error removing member:', err);\n      return false;\n    }\n  }, [currentFamily?.id, fetchMembers]);\n\n  const switchFamily = useCallback((familyId: string) => {\n    const family = families.find((f) => f.id === familyId);\n    if (family) {\n      setCurrentFamily(family);\n    }\n  }, [families, setCurrentFamily]);\n\n  const canEdit = currentUserRole === 'admin' || currentUserRole === 'editor';\n  const isAdmin = currentUserRole === 'admin';\n\n  return {\n    currentFamily,\n    families,\n    members,\n    currentUserRole,\n    isLoading,\n    error,\n    canEdit,\n    isAdmin,\n    fetchFamilies,\n    createFamily,\n    inviteMember,\n    updateMemberRole,\n    removeMember,\n    switchFamily,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useFamilyTree.ts"],"sourcesContent":["'use client';\nimport { useState } from 'react';\n\nexport type RelationshipTypeOption = 'parent' | 'child' | 'spouse' | 'sibling';\n\nexport interface MedicalCondition {\n    id: string;\n    name: string;\n    notes?: string;\n}\n\nexport interface Person {\n    id: string;\n    firstName: string;\n    lastName: string;\n    gender?: string;\n    birthDate?: string;\n    deathDate?: string;\n    avatarUrl?: string;\n    medicalConditions?: MedicalCondition[];\n}\n\nexport interface Union {\n    id: string;\n    partner1Id: string;\n    partner2Id: string;\n}\n\nexport function useFamilyTree() {\n    const [persons, setPersons] = useState<Person[]>([]);\n    const [unions, setUnions] = useState<Union[]>([]);\n    const [graphData, setGraphData] = useState<any>({ nodes: [], edges: [], persons: [], unions: [] });\n    const [isLoading, setIsLoading] = useState(false);\n\n    const createPersonWithRelationship = async (\n        personOptions: Partial<Person>,\n        relatedPersonId: string,\n        relationshipType: RelationshipTypeOption\n    ) => {\n        return { success: true };\n    };\n\n    const getRootPerson = () => {\n        return persons.length > 0 ? persons[0] : null;\n    };\n\n    const getPersonRole = (personId: string) => {\n        return 'relative';\n    };\n\n    const updatePerson = async (personId: string, updates: Partial<Person>) => {\n        return { success: true };\n    };\n\n    const deletePerson = async (personId: string) => {\n        return { success: true };\n    };\n\n    const getParentsOfPerson = (personId: string): Person[] => {\n        return [];\n    };\n\n    return {\n        persons,\n        unions,\n        graphData,\n        isLoading,\n        createPersonWithRelationship,\n        getRootPerson,\n        getPersonRole,\n        updatePerson,\n        deletePerson,\n        getParentsOfPerson\n    };\n}\n"],"names":[],"mappings":";;;;AACA;;AADA;;AA4BO,SAAS;;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAM;QAAE,OAAO,EAAE;QAAE,OAAO,EAAE;QAAE,SAAS,EAAE;QAAE,QAAQ,EAAE;IAAC;IAChG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,+BAA+B,OACjC,eACA,iBACA;QAEA,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,gBAAgB;QAClB,OAAO,QAAQ,MAAM,GAAG,IAAI,OAAO,CAAC,EAAE,GAAG;IAC7C;IAEA,MAAM,gBAAgB,CAAC;QACnB,OAAO;IACX;IAEA,MAAM,eAAe,OAAO,UAAkB;QAC1C,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,eAAe,OAAO;QACxB,OAAO;YAAE,SAAS;QAAK;IAC3B;IAEA,MAAM,qBAAqB,CAAC;QACxB,OAAO,EAAE;IACb;IAEA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA9CgB"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/hooks/useDYKQuiz.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { createClient } from '@/lib/supabase';\nimport { useFamily } from './useFamily';\nimport { useFamilyTree } from './useFamilyTree';\n\nexport interface QuizQuestion {\n    id: string;\n    question: string;\n    category: 'maternal' | 'paternal' | 'self' | 'extended';\n    difficulty: 'easy' | 'medium' | 'hard';\n    answerType: 'multiple_choice' | 'text' | 'date' | 'yes_no';\n    options?: string[];\n    correctAnswer: string;\n    relatedPersonId?: string;\n    relatedPersonName?: string;\n    points: number;\n}\n\nexport interface QuizStats {\n    totalQuestions: number;\n    answered: number;\n    correct: number;\n    score: number;\n    level: 'beginner' | 'medium' | 'high';\n    categoryProgress: {\n        maternal: number;\n        paternal: number;\n        self: number;\n        extended: number;\n    };\n}\n\nexport interface QuizResponse {\n    questionId: string;\n    response: string;\n    isCorrect: boolean;\n    answeredAt: string;\n}\n\nexport function useDYKQuiz() {\n    const supabase = useMemo(() => createClient(), []);\n    const { currentFamily } = useFamily();\n    const { persons, unions } = useFamilyTree();\n\n    const [questions, setQuestions] = useState<QuizQuestion[]>([]);\n    const [responses, setResponses] = useState<QuizResponse[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [stats, setStats] = useState<QuizStats>({\n        totalQuestions: 0,\n        answered: 0,\n        correct: 0,\n        score: 0,\n        level: 'beginner',\n        categoryProgress: { maternal: 0, paternal: 0, self: 0, extended: 0 },\n    });\n\n    // Generate questions based on family data\n    const generateQuestions = useCallback((): QuizQuestion[] => {\n        if (persons.length === 0) return [];\n\n        const generatedQuestions: QuizQuestion[] = [];\n\n        persons.forEach((person, index) => {\n            const personName = `${person.firstName} ${person.lastName || ''}`.trim();\n\n            // Birth date question\n            if (person.birthDate) {\n                const birthYear = new Date(person.birthDate).getFullYear();\n                const wrongYears = [birthYear - 2, birthYear + 3, birthYear - 5].filter(y => y > 1900);\n\n                generatedQuestions.push({\n                    id: `birth-year-${person.id}`,\n                    question: `Â¿En quÃ© aÃ±o naciÃ³ ${personName}?`,\n                    category: index % 2 === 0 ? 'maternal' : 'paternal',\n                    difficulty: 'medium',\n                    answerType: 'multiple_choice',\n                    options: shuffleArray([birthYear.toString(), ...wrongYears.map(String)]),\n                    correctAnswer: birthYear.toString(),\n                    relatedPersonId: person.id,\n                    relatedPersonName: personName,\n                    points: 10,\n                });\n\n                // Birth month question\n                const birthMonth = new Date(person.birthDate).toLocaleDateString('es', { month: 'long' });\n                const months = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];\n                const wrongMonths = months.filter(m => m !== birthMonth.toLowerCase()).slice(0, 3);\n\n                generatedQuestions.push({\n                    id: `birth-month-${person.id}`,\n                    question: `Â¿En quÃ© mes naciÃ³ ${personName}?`,\n                    category: index % 2 === 0 ? 'maternal' : 'paternal',\n                    difficulty: 'hard',\n                    answerType: 'multiple_choice',\n                    options: shuffleArray([birthMonth, ...wrongMonths]),\n                    correctAnswer: birthMonth,\n                    relatedPersonId: person.id,\n                    relatedPersonName: personName,\n                    points: 15,\n                });\n            }\n\n            // Birth place question\n            if (person.birthPlace) {\n                generatedQuestions.push({\n                    id: `birth-place-${person.id}`,\n                    question: `Â¿DÃ³nde naciÃ³ ${personName}?`,\n                    category: index % 2 === 0 ? 'maternal' : 'paternal',\n                    difficulty: 'hard',\n                    answerType: 'text',\n                    correctAnswer: person.birthPlace,\n                    relatedPersonId: person.id,\n                    relatedPersonName: personName,\n                    points: 20,\n                });\n            }\n\n            // Gender question\n            generatedQuestions.push({\n                id: `gender-${person.id}`,\n                question: `Â¿${personName} es hombre o mujer?`,\n                category: 'extended',\n                difficulty: 'easy',\n                answerType: 'multiple_choice',\n                options: ['Hombre', 'Mujer'],\n                correctAnswer: person.gender === 'male' ? 'Hombre' : 'Mujer',\n                relatedPersonId: person.id,\n                relatedPersonName: personName,\n                points: 5,\n            });\n\n            // Is living question\n            generatedQuestions.push({\n                id: `living-${person.id}`,\n                question: `Â¿${personName} estÃ¡ vivo/a actualmente?`,\n                category: 'extended',\n                difficulty: 'easy',\n                answerType: 'yes_no',\n                options: ['SÃ­', 'No'],\n                correctAnswer: person.isLiving ? 'SÃ­' : 'No',\n                relatedPersonId: person.id,\n                relatedPersonName: personName,\n                points: 5,\n            });\n        });\n\n        // Relationship questions from unions\n        unions.forEach((union) => {\n            const partner1 = persons.find(p => p.id === union.partner1Id);\n            const partner2 = persons.find(p => p.id === union.partner2Id);\n\n            if (partner1 && partner2) {\n                const p1Name = `${partner1.firstName} ${partner1.lastName || ''}`.trim();\n                const p2Name = `${partner2.firstName} ${partner2.lastName || ''}`.trim();\n\n                generatedQuestions.push({\n                    id: `spouse-${union.id}`,\n                    question: `Â¿QuiÃ©n es el/la esposo/a de ${p1Name}?`,\n                    category: 'extended',\n                    difficulty: 'medium',\n                    answerType: 'multiple_choice',\n                    options: shuffleArray([p2Name, ...persons.filter(p => p.id !== partner2.id && p.id !== partner1.id).slice(0, 3).map(p => `${p.firstName} ${p.lastName || ''}`.trim())]),\n                    correctAnswer: p2Name,\n                    relatedPersonId: partner1.id,\n                    relatedPersonName: p1Name,\n                    points: 10,\n                });\n\n                // Marriage year question\n                if (union.startDate) {\n                    const marriageYear = new Date(union.startDate).getFullYear();\n                    const wrongYears = [marriageYear - 3, marriageYear + 2, marriageYear - 7];\n\n                    generatedQuestions.push({\n                        id: `marriage-year-${union.id}`,\n                        question: `Â¿En quÃ© aÃ±o se casaron ${p1Name} y ${p2Name}?`,\n                        category: 'extended',\n                        difficulty: 'hard',\n                        answerType: 'multiple_choice',\n                        options: shuffleArray([marriageYear.toString(), ...wrongYears.map(String)]),\n                        correctAnswer: marriageYear.toString(),\n                        relatedPersonId: union.id,\n                        points: 15,\n                    });\n                }\n            }\n        });\n\n        // Count family members question\n        if (persons.length > 0) {\n            const wrongCounts = [persons.length - 2, persons.length + 3, persons.length + 1].filter(n => n > 0);\n\n            generatedQuestions.push({\n                id: 'family-count',\n                question: 'Â¿CuÃ¡ntas personas hay en tu Ã¡rbol familiar?',\n                category: 'self',\n                difficulty: 'easy',\n                answerType: 'multiple_choice',\n                options: shuffleArray([persons.length.toString(), ...wrongCounts.map(String)]),\n                correctAnswer: persons.length.toString(),\n                points: 5,\n            });\n        }\n\n        return shuffleArray(generatedQuestions);\n    }, [persons, unions]);\n\n    // Fetch existing responses from database\n    const fetchResponses = useCallback(async () => {\n        if (!currentFamily?.id) return;\n\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) return;\n\n            const { data, error } = await supabase\n                .from('dyk_responses')\n                .select('question_id, response, is_correct, completed_at')\n                .eq('family_id', currentFamily.id)\n                .eq('user_id', user.id);\n\n            if (error) {\n                // Silently ignore if table doesn't exist - quiz works without persistence\n                const isTableMissing = error.message?.includes('does not exist') ||\n                    error.message?.includes('Could not find');\n                if (!isTableMissing) {\n                    console.error('Error fetching responses:', error);\n                }\n                return;\n            }\n\n            const mappedResponses: QuizResponse[] = (data || []).map((r: any) => ({\n                questionId: r.question_id,\n                response: r.response,\n                isCorrect: r.is_correct,\n                answeredAt: r.completed_at,\n            }));\n\n            setResponses(mappedResponses);\n        } catch (err) {\n            console.error('Error:', err);\n        }\n    }, [currentFamily?.id, supabase]);\n\n    // Calculate stats\n    useEffect(() => {\n        const totalQuestions = questions.length;\n        const answered = responses.length;\n        const correct = responses.filter(r => r.isCorrect).length;\n        const score = answered > 0 ? Math.round((correct / answered) * 100) : 0;\n\n        let level: 'beginner' | 'medium' | 'high' = 'beginner';\n        if (score >= 80) level = 'high';\n        else if (score >= 50) level = 'medium';\n\n        // Calculate category progress\n        const categoryProgress = { maternal: 0, paternal: 0, self: 0, extended: 0 };\n        const categoryCounts = { maternal: 0, paternal: 0, self: 0, extended: 0 };\n        const categoryCorrect = { maternal: 0, paternal: 0, self: 0, extended: 0 };\n\n        questions.forEach(q => {\n            categoryCounts[q.category]++;\n            const response = responses.find(r => r.questionId === q.id);\n            if (response?.isCorrect) {\n                categoryCorrect[q.category]++;\n            }\n        });\n\n        Object.keys(categoryProgress).forEach(cat => {\n            const key = cat as keyof typeof categoryProgress;\n            categoryProgress[key] = categoryCounts[key] > 0\n                ? Math.round((categoryCorrect[key] / categoryCounts[key]) * 100)\n                : 0;\n        });\n\n        setStats({\n            totalQuestions,\n            answered,\n            correct,\n            score,\n            level,\n            categoryProgress,\n        });\n    }, [questions, responses]);\n\n    // Load questions and responses\n    useEffect(() => {\n        setIsLoading(true);\n        const generated = generateQuestions();\n        setQuestions(generated);\n        fetchResponses().finally(() => setIsLoading(false));\n    }, [generateQuestions, fetchResponses]);\n\n    // Submit answer\n    const submitAnswer = useCallback(async (questionId: string, answer: string): Promise<boolean> => {\n        if (!currentFamily?.id) return false;\n\n        const question = questions.find(q => q.id === questionId);\n        if (!question) return false;\n\n        // Check if answer is correct\n        let isCorrect = false;\n        if (question.answerType === 'text') {\n            // For text answers, do case-insensitive comparison\n            isCorrect = answer.toLowerCase().trim() === question.correctAnswer.toLowerCase().trim();\n        } else {\n            isCorrect = answer === question.correctAnswer;\n        }\n\n        // Function to update local state\n        const updateLocalState = () => {\n            setResponses(prev => {\n                const existing = prev.findIndex(r => r.questionId === questionId);\n                const newResponse = {\n                    questionId,\n                    response: answer,\n                    isCorrect,\n                    answeredAt: new Date().toISOString(),\n                };\n\n                if (existing >= 0) {\n                    const updated = [...prev];\n                    updated[existing] = newResponse;\n                    return updated;\n                }\n                return [...prev, newResponse];\n            });\n        };\n\n        try {\n            const { data: { user } } = await supabase.auth.getUser();\n            if (!user) {\n                // Still update local state even without auth\n                updateLocalState();\n                return isCorrect;\n            }\n\n            // Save response directly with the generated question ID\n            // No need to create a dyk_questions record for dynamically generated questions\n            const pointsEarned = isCorrect ? question.points : 0;\n            const { error: responseError } = await supabase\n                .from('dyk_responses')\n                .upsert({\n                    family_id: currentFamily.id,\n                    user_id: user.id,\n                    question_id: questionId, // Use the original generated ID\n                    response: answer,\n                    is_correct: isCorrect,\n                    points_earned: pointsEarned,\n                    completed_at: new Date().toISOString(),\n                }, {\n                    onConflict: 'family_id,user_id,question_id'\n                });\n\n            if (responseError) {\n                // Silently ignore if table doesn't exist - quiz still works locally\n                const isTableMissing = responseError.message?.includes('does not exist') ||\n                    responseError.message?.includes('Could not find');\n                if (!isTableMissing) {\n                    console.error('Error saving response:', responseError);\n                }\n            }\n\n            // Update local state\n            updateLocalState();\n\n            return isCorrect;\n        } catch (err) {\n            console.error('Error submitting answer:', err);\n            return false;\n        }\n    }, [currentFamily?.id, questions, supabase]);\n\n    // Get unanswered questions for quiz\n    const getQuizQuestions = useCallback((count: number = 10): QuizQuestion[] => {\n        const answeredIds = new Set(responses.map(r => r.questionId));\n        const unanswered = questions.filter(q => !answeredIds.has(q.id));\n        return unanswered.slice(0, count);\n    }, [questions, responses]);\n\n    return {\n        questions,\n        responses,\n        stats,\n        isLoading,\n        submitAnswer,\n        getQuizQuestions,\n        refreshQuestions: () => {\n            const generated = generateQuestions();\n            setQuestions(generated);\n        },\n    };\n}\n\n// Utility function to shuffle array\nfunction shuffleArray<T>(array: T[]): T[] {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 894, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/app/%28dashboard%29/dyk/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport Link from 'next/link';\nimport {\n  Container,\n  Card,\n  CardHeader,\n  CardContent,\n  Button,\n  Badge,\n  Grid,\n  Skeleton,\n} from '@kintree/ui';\nimport { useDYKQuiz } from '@/hooks/useDYKQuiz';\nimport { useFamily } from '@/hooks/useFamily';\nimport { useFamilyTree } from '@/hooks/useFamilyTree';\nimport { createClient } from '@/lib/supabase';\n\ninterface Challenge {\n  id: string;\n  title: string;\n  description: string;\n  points: number;\n  difficulty: 'easy' | 'medium' | 'hard';\n}\n\nexport default function DYKPage() {\n  const { stats, isLoading: quizLoading, questions } = useDYKQuiz();\n  const { currentFamily, isLoading: familyLoading } = useFamily();\n  const { persons } = useFamilyTree();\n  const supabase = useMemo(() => createClient(), []);\n\n  const [challenges, setChallenges] = useState<Challenge[]>([]);\n  const [isLoadingChallenges, setIsLoadingChallenges] = useState(true);\n\n  // Fetch detective challenges\n  useEffect(() => {\n    async function fetchChallenges() {\n      setIsLoadingChallenges(true);\n      try {\n        const { data, error } = await supabase\n          .from('detective_challenges')\n          .select('id, title, description, points, difficulty')\n          .eq('is_active', true)\n          .limit(3);\n\n        if (error) {\n          console.error('Error fetching challenges:', error);\n          // Use default challenges if fetch fails\n          setChallenges([\n            {\n              id: '1',\n              title: 'Interview a Grandparent',\n              description: 'Record a conversation with a grandparent about their childhood',\n              points: 50,\n              difficulty: 'medium',\n            },\n            {\n              id: '2',\n              title: 'Find an Old Photo',\n              description: 'Locate and digitize a photo from before 1980',\n              points: 25,\n              difficulty: 'easy',\n            },\n            {\n              id: '3',\n              title: 'Research Immigration Records',\n              description: 'Find immigration records for an ancestor',\n              points: 100,\n              difficulty: 'hard',\n            },\n          ]);\n        } else {\n          setChallenges(data || []);\n        }\n      } catch (err) {\n        console.error('Error:', err);\n      } finally {\n        setIsLoadingChallenges(false);\n      }\n    }\n\n    fetchChallenges();\n  }, [supabase]);\n\n  const categories = [\n    { id: 'maternal', name: 'Maternal Line', icon: 'ðŸ‘©', progress: stats.categoryProgress.maternal },\n    { id: 'paternal', name: 'Paternal Line', icon: 'ðŸ‘¨', progress: stats.categoryProgress.paternal },\n    { id: 'self', name: 'Personal History', icon: 'ðŸªž', progress: stats.categoryProgress.self },\n    { id: 'extended', name: 'Extended Family', icon: 'ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦', progress: stats.categoryProgress.extended },\n  ];\n\n  // Calculate knowledge gaps based on family data\n  const knowledgeGaps = useMemo(() => {\n    const gaps = [];\n\n    // Check for missing birth dates\n    const missingBirthDates = persons.filter(p => !p.birthDate);\n    if (missingBirthDates.length > 0) {\n      gaps.push({\n        title: 'Birth Dates',\n        description: `${missingBirthDates.length} person(s) missing birth date`,\n        icon: <CalendarIcon />,\n      });\n    }\n\n    // Check for missing birth places\n    const missingBirthPlaces = persons.filter(p => !p.birthPlace);\n    if (missingBirthPlaces.length > 0) {\n      gaps.push({\n        title: 'Birth Places',\n        description: `${missingBirthPlaces.length} person(s) missing birth place`,\n        icon: <GlobeIcon />,\n      });\n    }\n\n    // Check for older generations\n    const generations = new Set(persons.map(p => {\n      if (p.birthDate) {\n        const year = new Date(p.birthDate).getFullYear();\n        return Math.floor((2024 - year) / 25);\n      }\n      return 0;\n    }));\n\n    if (generations.size < 3) {\n      gaps.push({\n        title: 'More Generations',\n        description: 'Add information about grandparents and great-grandparents',\n        icon: <UserQuestionIcon />,\n      });\n    }\n\n    // If no gaps found, show encouragement\n    if (gaps.length === 0) {\n      gaps.push({\n        title: 'Great Job!',\n        description: 'Your family tree is quite complete',\n        icon: <StarIcon />,\n      });\n    }\n\n    return gaps.slice(0, 3);\n  }, [persons]);\n\n  const isLoading = quizLoading || familyLoading;\n\n  if (isLoading) {\n    return (\n      <Container size=\"lg\" padding={false}>\n        <div className=\"mb-6\">\n          <Skeleton width={200} height={32} />\n          <Skeleton width={300} height={20} className=\"mt-2\" />\n        </div>\n        <Skeleton height={200} className=\"mb-6 rounded-2xl\" />\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <Skeleton height={300} className=\"rounded-2xl\" />\n          <Skeleton height={300} className=\"rounded-2xl\" />\n        </div>\n      </Container>\n    );\n  }\n\n  return (\n    <Container size=\"lg\" padding={false}>\n      {/* Header with gradient text */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gradient-primary\">Do You Know?</h1>\n          <p className=\"text-neutral-500 mt-1\">Test your family knowledge</p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Link href=\"/dyk/challenges\">\n            <Button variant=\"outline\" leftIcon={<TrophyIcon />}>\n              Challenges\n            </Button>\n          </Link>\n          <Link href=\"/dyk/quiz\">\n            <Button leftIcon={<PlayIcon />}>\n              Start Quiz\n            </Button>\n          </Link>\n        </div>\n      </div>\n\n      {/* Score Overview - Hero Card with gradient and decorative elements */}\n      <div className=\"relative mb-6 overflow-hidden rounded-2xl\">\n        {/* Animated background circles */}\n        <div className=\"absolute -top-20 -right-20 w-64 h-64 rounded-full bg-white/10 animate-float\" />\n        <div className=\"absolute -bottom-16 -left-16 w-48 h-48 rounded-full bg-white/5 animate-float\" style={{ animationDelay: '1s' }} />\n        <div className=\"absolute top-1/2 left-1/3 w-32 h-32 rounded-full bg-accent-400/20 animate-pulse-glow\" />\n\n        <Card padding=\"lg\" className=\"relative bg-gradient-hero text-white border-0\">\n          <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-10\">\n            <div>\n              <p className=\"text-white/70 mb-1 font-medium\">Your Family Knowledge Score</p>\n              <div className=\"flex items-baseline gap-3\">\n                <span className=\"text-6xl font-bold\">{stats.score}%</span>\n                <Badge className=\"bg-white/20 text-white border-white/30 backdrop-blur-sm\">\n                  {stats.level === 'high' ? 'Expert' : stats.level === 'medium' ? 'Intermediate' : 'Beginner'}\n                </Badge>\n              </div>\n              <p className=\"text-white/70 mt-3\">\n                {stats.correct} out of {stats.answered} questions answered correctly\n              </p>\n              {questions.length > 0 && (\n                <p className=\"text-white/50 text-sm mt-1\">\n                  {questions.length - stats.answered} questions available\n                </p>\n              )}\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <CircularProgress value={stats.score} size={140} />\n            </div>\n          </div>\n        </Card>\n      </div>\n\n      {/* No Family Warning */}\n      {!currentFamily && (\n        <Card padding=\"lg\" className=\"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"p-3 rounded-xl bg-gradient-to-br from-amber-400 to-orange-400 text-white shadow-lg shadow-amber-200\">\n              <AlertIcon className=\"w-6 h-6\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-amber-900\">Create your family first</h3>\n              <p className=\"text-amber-700 text-sm\">\n                To generate quiz questions, you first need to create your family and add people.\n              </p>\n            </div>\n            <Link href=\"/\">\n              <Button size=\"sm\">Go to Home</Button>\n            </Link>\n          </div>\n        </Card>\n      )}\n\n      {/* No Persons Warning */}\n      {currentFamily && persons.length === 0 && (\n        <Card padding=\"lg\" className=\"mb-6 bg-gradient-to-r from-blue-50 to-cyan-50 border-blue-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"p-3 rounded-xl bg-gradient-to-br from-blue-400 to-cyan-400 text-white shadow-lg shadow-blue-200\">\n              <UsersIcon className=\"w-6 h-6\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-blue-900\">Add people to your tree</h3>\n              <p className=\"text-blue-700 text-sm\">\n                Quiz questions are generated from your family tree. Add people to start!\n              </p>\n            </div>\n            <Link href=\"/tree\">\n              <Button size=\"sm\">Go to Tree</Button>\n            </Link>\n          </div>\n        </Card>\n      )}\n\n      <Grid cols={2} gap=\"lg\" responsive>\n        {/* Categories with animated progress bars */}\n        <Card padding=\"md\" className=\"hover-lift\">\n          <CardHeader title=\"Quiz Categories\" subtitle=\"Your progress by family line\" />\n          <CardContent>\n            <div className=\"space-y-5\">\n              {categories.map((category, index) => (\n                <div\n                  key={category.id}\n                  className=\"flex items-center gap-4 animate-slide-up\"\n                  style={{ animationDelay: `${index * 100}ms` }}\n                >\n                  <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center text-2xl\">\n                    {category.icon}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"text-sm font-semibold text-neutral-800\">\n                        {category.name}\n                      </span>\n                      <span className=\"text-sm font-bold text-primary-600\">{category.progress}%</span>\n                    </div>\n                    <div className=\"h-2.5 bg-neutral-100 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full rounded-full transition-all duration-700 ease-out progress-bar-gradient\"\n                        style={{ width: `${category.progress}%` }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {questions.length > 0 && (\n              <div className=\"mt-8 pt-6 border-t border-neutral-100\">\n                <Link href=\"/dyk/quiz\">\n                  <Button fullWidth className=\"group\">\n                    <span className=\"mr-2\">\n                      {stats.answered > 0\n                        ? `Continue Quiz (${questions.length - stats.answered} remaining)`\n                        : `Start Quiz (${questions.length} questions)`}\n                    </span>\n                    <ArrowRightIcon className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                  </Button>\n                </Link>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Detective Challenges */}\n        <Card padding=\"md\" className=\"hover-lift\">\n          <CardHeader\n            title=\"Detective Challenges\"\n            subtitle=\"Earn points by researching your family\"\n            action={\n              <Link href=\"/dyk/challenges\">\n                <Button variant=\"ghost\" size=\"sm\">\n                  View all\n                </Button>\n              </Link>\n            }\n          />\n          <CardContent>\n            {isLoadingChallenges ? (\n              <div className=\"space-y-3\">\n                <Skeleton height={80} className=\"rounded-xl\" />\n                <Skeleton height={80} className=\"rounded-xl\" />\n                <Skeleton height={80} className=\"rounded-xl\" />\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {challenges.map((challenge, index) => (\n                  <div\n                    key={challenge.id}\n                    className=\"p-4 rounded-xl border border-neutral-100 hover:border-primary-200 bg-white hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all cursor-pointer group animate-slide-up\"\n                    style={{ animationDelay: `${index * 100}ms` }}\n                  >\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div>\n                        <h4 className=\"font-semibold text-neutral-900 group-hover:text-primary-700 transition-colors\">\n                          {challenge.title}\n                        </h4>\n                        <p className=\"text-sm text-neutral-500 mt-1\">\n                          {challenge.description}\n                        </p>\n                      </div>\n                      <Badge\n                        variant={\n                          challenge.difficulty === 'easy'\n                            ? 'success'\n                            : challenge.difficulty === 'medium'\n                              ? 'warning'\n                              : 'error'\n                        }\n                        glow\n                        size=\"sm\"\n                      >\n                        {challenge.points} pts\n                      </Badge>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Knowledge Gaps */}\n        <Card padding=\"md\" className=\"col-span-full hover-lift\">\n          <CardHeader title=\"Improvement Areas\" subtitle=\"Missing information in your family tree\" />\n          <CardContent>\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n              {knowledgeGaps.map((gap, index) => (\n                <GapCard\n                  key={index}\n                  title={gap.title}\n                  description={gap.description}\n                  icon={gap.icon}\n                  delay={index * 100}\n                />\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </Grid>\n    </Container>\n  );\n}\n\nfunction CircularProgress({ value, size }: { value: number; size: number }) {\n  const strokeWidth = 10;\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (value / 100) * circumference;\n\n  return (\n    <div className=\"relative\" style={{ width: size, height: size }}>\n      {/* Glow effect */}\n      <div\n        className=\"absolute inset-0 rounded-full blur-xl opacity-50\"\n        style={{ background: `conic-gradient(from 0deg, rgba(255,255,255,0.3) ${value}%, transparent ${value}%)` }}\n      />\n\n      <svg className=\"transform -rotate-90 relative z-10\" width={size} height={size}>\n        {/* Background circle */}\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke=\"rgba(255,255,255,0.2)\"\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n        />\n        {/* Progress circle with gradient */}\n        <defs>\n          <linearGradient id=\"progressGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n            <stop offset=\"0%\" stopColor=\"white\" />\n            <stop offset=\"100%\" stopColor=\"rgba(255,255,255,0.7)\" />\n          </linearGradient>\n        </defs>\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke=\"url(#progressGradient)\"\n          strokeWidth={strokeWidth}\n          fill=\"none\"\n          strokeLinecap=\"round\"\n          strokeDasharray={circumference}\n          strokeDashoffset={offset}\n          className=\"transition-all duration-1000 ease-out\"\n          style={{ filter: 'drop-shadow(0 0 8px rgba(255,255,255,0.5))' }}\n        />\n      </svg>\n      <div className=\"absolute inset-0 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <span className=\"text-4xl font-bold\">{value}</span>\n          <span className=\"text-xl opacity-70\">%</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction GapCard({\n  title,\n  description,\n  icon,\n  delay = 0,\n}: {\n  title: string;\n  description: string;\n  icon: React.ReactNode;\n  delay?: number;\n}) {\n  return (\n    <div\n      className=\"p-5 rounded-2xl bg-gradient-to-br from-accent-50 to-amber-50 border border-accent-100 hover:border-accent-200 transition-all hover:-translate-y-1 cursor-pointer animate-slide-up\"\n      style={{ animationDelay: `${delay}ms` }}\n    >\n      <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-accent-400 to-amber-400 flex items-center justify-center mb-4 text-white shadow-lg shadow-accent-200\">\n        {icon}\n      </div>\n      <h4 className=\"font-semibold text-neutral-900\">{title}</h4>\n      <p className=\"text-sm text-neutral-600 mt-1\">{description}</p>\n    </div>\n  );\n}\n\n// Icons\nfunction TrophyIcon() {\n  return (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M6 9H4.5a2.5 2.5 0 010-5H6M18 9h1.5a2.5 2.5 0 000-5H18M4 22h16M10 22V8M14 22V8\" />\n      <path d=\"M18 2H6v7a6 6 0 0012 0V2z\" />\n    </svg>\n  );\n}\n\nfunction PlayIcon() {\n  return (\n    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <polygon points=\"5 3 19 12 5 21 5 3\" />\n    </svg>\n  );\n}\n\nfunction ArrowRightIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className || 'w-4 h-4'} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M5 12h14M12 5l7 7-7 7\" />\n    </svg>\n  );\n}\n\nfunction UserQuestionIcon() {\n  return (\n    <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <circle cx=\"12\" cy=\"8\" r=\"4\" />\n      <path d=\"M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2\" />\n    </svg>\n  );\n}\n\nfunction CalendarIcon() {\n  return (\n    <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" />\n      <path d=\"M16 2v4M8 2v4M3 10h18\" />\n    </svg>\n  );\n}\n\nfunction GlobeIcon() {\n  return (\n    <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z\" />\n    </svg>\n  );\n}\n\nfunction StarIcon() {\n  return (\n    <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\" />\n    </svg>\n  );\n}\n\nfunction AlertIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\n      <path d=\"M12 8v4M12 16h.01\" />\n    </svg>\n  );\n}\n\nfunction UsersIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2\" />\n      <circle cx=\"9\" cy=\"7\" r=\"4\" />\n      <path d=\"M23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75\" />\n    </svg>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}