{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/lib/supabase-server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\n\n// Lazy getter for environment variables\nfunction getEnvVars() {\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  if (!supabaseUrl || !supabaseAnonKey) {\n    return {\n      url: 'https://placeholder.supabase.co',\n      key: 'placeholder-anon-key-for-build-time-only',\n    };\n  }\n\n  return { url: supabaseUrl, key: supabaseAnonKey };\n}\n\n/**\n * Create a Supabase client for server components\n */\nexport async function createServerSupabaseClient() {\n  const cookieStore = await cookies();\n  const { url, key } = getEnvVars();\n\n  return createServerClient(url, key, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll();\n      },\n      setAll(cookiesToSet) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) =>\n            cookieStore.set(name, value, options)\n          );\n        } catch {\n          // The `setAll` method was called from a Server Component.\n          // This can be ignored if you have middleware refreshing sessions.\n        }\n      },\n    },\n  });\n}\n\n/**\n * Get the current user session from server\n */\nexport async function getServerSession() {\n  const supabase = await createServerSupabaseClient();\n  const { data: { session }, error } = await supabase.auth.getSession();\n  return { session, error };\n}\n\n/**\n * Get the current user from server\n */\nexport async function getServerUser() {\n  const supabase = await createServerSupabaseClient();\n  const { data: { user }, error } = await supabase.auth.getUser();\n  return { user, error };\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;;;AAEA,wCAAwC;AACxC,SAAS;IACP,MAAM;IACN,MAAM;IAEN;;IAOA,OAAO;QAAE,KAAK;QAAa,KAAK;IAAgB;AAClD;AAKO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;IAErB,OAAO,IAAA,+LAAkB,EAAC,KAAK,KAAK;QAClC,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,kEAAkE;gBACpE;YACF;QACF;IACF;AACF;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM;IACvB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IACnE,OAAO;QAAE;QAAS;IAAM;AAC1B;AAKO,eAAe;IACpB,MAAM,WAAW,MAAM;IACvB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAC7D,OAAO;QAAE;QAAM;IAAM;AACvB"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/src/app/actions/social.ts"],"sourcesContent":["'use server';\n\nimport { createServerSupabaseClient } from '@/lib/supabase-server';\nimport { revalidatePath } from 'next/cache';\n\nexport async function sharePost(prevState: any, formData: FormData) {\n    const url = formData.get('url') as string;\n    const familyId = formData.get('familyId') as string;\n\n    if (!url || !familyId) {\n        return { success: false, message: 'URL is required' };\n    }\n\n    // Basic URL validation and platform detection\n    let platform = '';\n    if (url.includes('instagram.com')) {\n        platform = 'instagram';\n    } else if (url.includes('facebook.com')) {\n        platform = 'facebook';\n    } else {\n        return { success: false, message: 'Only Instagram and Facebook URLs are supported' };\n    }\n\n    const supabase = await createServerSupabaseClient();\n\n    try {\n        const { error } = await supabase.from('social_posts').insert({\n            family_id: familyId,\n            permalink: url,\n            platform_post_id: url, // Using URL as ID for now, or extract meaningful ID\n            platform: platform,\n            post_type: 'link',\n            posted_at: new Date().toISOString(),\n            content: '', // Optional content\n        });\n\n        if (error) {\n            console.error('Error inserting post:', error);\n            return { success: false, message: `Failed to share post: ${error.message}` };\n        }\n\n        revalidatePath('/social');\n        return { success: true, message: 'Post shared successfully!' };\n    } catch (error) {\n        console.error('Server error:', error);\n        return { success: false, message: 'Internal server error' };\n    }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAEO,eAAe,UAAU,SAAc,EAAE,QAAkB;IAC9D,MAAM,MAAM,SAAS,GAAG,CAAC;IACzB,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,CAAC,OAAO,CAAC,UAAU;QACnB,OAAO;YAAE,SAAS;YAAO,SAAS;QAAkB;IACxD;IAEA,8CAA8C;IAC9C,IAAI,WAAW;IACf,IAAI,IAAI,QAAQ,CAAC,kBAAkB;QAC/B,WAAW;IACf,OAAO,IAAI,IAAI,QAAQ,CAAC,iBAAiB;QACrC,WAAW;IACf,OAAO;QACH,OAAO;YAAE,SAAS;YAAO,SAAS;QAAiD;IACvF;IAEA,MAAM,WAAW,MAAM,IAAA,6KAA0B;IAEjD,IAAI;QACA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;YACzD,WAAW;YACX,WAAW;YACX,kBAAkB;YAClB,UAAU;YACV,WAAW;YACX,WAAW,IAAI,OAAO,WAAW;YACjC,SAAS;QACb;QAEA,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO;gBAAE,SAAS;gBAAO,SAAS,CAAC,sBAAsB,EAAE,MAAM,OAAO,EAAE;YAAC;QAC/E;QAEA,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;YAAM,SAAS;QAA4B;IACjE,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO;YAAE,SAAS;YAAO,SAAS;QAAwB;IAC9D;AACJ;;;IA1CsB;;AAAA,+OAAA"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/smsm/Desktop/Portafolio%20IA/arbol-genealogico-digital%202/apps/web/.next-internal/server/app/%28dashboard%29/social/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {sharePost as '60403b1f8f1e14c5cdc5d1ab8a40a9ca6a9805e0e7'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}